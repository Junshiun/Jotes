(function(){"use strict";var e={9690:function(e,t,o){var n=o(9242),a=o(3396);const s=e=>((0,a.dD)("data-v-decf29c6"),e=e(),(0,a.Cn)(),e),r={class:"pageWrap_hp"},l={class:"wallpaperWrap_hp"},i=s((()=>(0,a._)("img",{class:"wallpaper_hp",src:"https://images.pexels.com/photos/442574/pexels-photo-442574.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"},null,-1))),c={class:"mainInfo_hp"},u=s((()=>(0,a._)("span",{class:"title"},"Create Your Notes in Jotes",-1))),p=s((()=>(0,a._)("span",null,"Login or Sign Up",-1))),d=(0,a.Uk)("Here");function m(e,t,o,n,s,m){const g=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",l,[i,(0,a._)("div",c,[u,p,(0,a.Wm)(g,{to:{name:"userMain"},class:"linkButton"},{default:(0,a.w5)((()=>[d])),_:1})])])])}var g={name:"homePage"},w=o(89);const h=(0,w.Z)(g,[["render",m],["__scopeId","data-v-decf29c6"]]);var v=h;const f={key:0,class:"mainPage"},y={class:"notes"};function _(e,t,o,n,s,r){const l=(0,a.up)("category-bar"),i=(0,a.up)("noteContainer"),c=(0,a.up)("router-view"),u=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.store.getters.getNotes?((0,a.wg)(),(0,a.iD)("div",f,[(0,a.Wm)(l,{notes:n.store.getters.getNotes,onFilter:n.filteredNotes},null,8,["notes","onFilter"]),(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.showingNotes,(e=>((0,a.wg)(),(0,a.j4)(i,{key:e,note:e,onFilter:n.filteredNotes},null,8,["note","onFilter"])))),128))]),((0,a.wg)(),(0,a.j4)(c,{key:e.$route.fullPath,class:"partWrapper"}))])):(0,a.kq)("",!0),(0,a.Wm)(u,{show:n.loadShow},null,8,["show"])],64)}var b=o(4870),k=o(7139);const C={class:"noteWrapper"},N={class:"topWrapper"},P={class:"date"},D={class:"title"},U={class:"content"};function S(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",N,[(0,a._)("span",P,(0,k.zw)(n.date),1)]),(0,a._)("div",{class:"bottomWrapper",onClick:t[1]||(t[1]=(...e)=>n.noteNavigate&&n.noteNavigate(...e))},[(0,a._)("h1",D,(0,k.zw)(o.note.title),1),""!==o.note.category&&null!==o.note.category?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"category",onClick:t[0]||(t[0]=e=>n.filter(o.note.category))},(0,k.zw)(o.note.category),1)):(0,a.kq)("",!0),(0,a._)("p",U,(0,k.zw)(o.note.content),1)])])}const H={class:"optionMain",ref:"option"},W={class:"options"};function O(e,t,o,s,r,l){return(0,a.wg)(),(0,a.iD)("div",H,[(0,a._)("i",{class:"bi bi-three-dots",onClick:t[0]||(t[0]=(...e)=>s.clickHandler&&s.clickHandler(...e))}),(0,a.wy)((0,a._)("div",W,[(0,a._)("span",{onClick:t[1]||(t[1]=(...e)=>s.editNote&&s.editNote(...e))},"edit"),(0,a._)("span",{onClick:t[2]||(t[2]=(...e)=>s.deleteNote&&s.deleteNote(...e))},"delete")],512),[[n.F8,s.showOptions]])],512)}var j=o(65),B={name:"noteOptions",props:["noteId"],setup(e){let t=(0,b.iH)(!1),o=(0,b.iH)(null);const n=(0,j.oR)();(0,a.bv)((()=>{document.addEventListener("mousedown",r)})),(0,a.Ah)((()=>{document.removeEventListener("mousedown",r)}));const s=()=>{t.value=!t.value},r=e=>{o.value.contains(e.target)||(t.value=!1)},l=()=>{To.push({path:`/notes/${e.noteId}/edit`})},i=async()=>{n.dispatch({type:"deleteNote",payload:{id:e.noteId}})};return{showOptions:t,clickHandler:s,option:o,deleteNote:i,editNote:l}}};const E=(0,w.Z)(B,[["render",O],["__scopeId","data-v-1e482718"]]);var I=E,T={name:"noteContainer",props:["note"],components:{noteOptions:I},setup(e,t){const o=e=>{t.emit("filter",e)},n=new Date(e.note.updatedAt).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"}),a=()=>{To.push({path:`/notes/${e.note._id}`})};return{filter:o,date:n,noteNavigate:a}}};const q=(0,w.Z)(T,[["render",S],["__scopeId","data-v-609c0140"]]);var L=q;const z=e=>((0,a.dD)("data-v-685ec4fe"),e=e(),(0,a.Cn)(),e),R={class:"categoryBar"},F={class:"createWrap"},Z=z((()=>(0,a._)("i",{class:"bi bi-plus-circle-dotted"},null,-1))),A=(0,a.Uk)(" note"),x={key:0,class:"categoriesWrap"},M=["onClick"];function $(e,t,o,n,s,r){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",R,[(0,a._)("div",F,[(0,a.Wm)(l,{class:"create",to:"/notes/create"},{default:(0,a.w5)((()=>[Z,A])),_:1})]),n.categories?((0,a.wg)(),(0,a.iD)("div",x,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.categories,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"categoryContainer",key:e,onClick:t=>n.onClick(t,e),ref_for:!0,ref:"categoryRef"},(0,k.zw)(e),9,M)))),128))])):(0,a.kq)("",!0)])}var V={name:"categoryBar",props:["notes"],setup(e,t){let o=(0,b.iH)(null),n=(0,b.iH)(null),s=(0,b.iH)(null);o=(0,a.Fl)((()=>{let t=["All"];return e.notes.map((e=>{t.includes(e.category)||""===e.category||null===e.category||t.push(e.category)})),t}));const r=(e,o)=>{for(let t=0;t<s.value.length;t++)s.value[t].classList.remove("selected");e.target.classList.toggle("selected"),n.value=o,t.emit("filter",o)};return(0,a.bv)((()=>{s.value[0].classList.add("selected")})),{categoryRef:s,categories:o,onClick:r,selected:n}}};const J=(0,w.Z)(V,[["render",$],["__scopeId","data-v-685ec4fe"]]);var Y=J;const G=e=>((0,a.dD)("data-v-2797ffdf"),e=e(),(0,a.Cn)(),e),K={key:0,class:"loadingPage"},Q=G((()=>(0,a._)("div",{class:"loadingWrap"},[(0,a._)("div",null,"Loading"),(0,a._)("div",{class:"loadingBar"})],-1))),X=[Q];function ee(e,t,o,n,s,r){return o.show?((0,a.wg)(),(0,a.iD)("div",K,X)):(0,a.kq)("",!0)}var te={props:["show"],setup(){}};const oe=(0,w.Z)(te,[["render",ee],["__scopeId","data-v-2797ffdf"]]);var ne=oe,ae={name:"notesPage",components:{noteContainer:L,categoryBar:Y,loadingPage:ne},setup(){let e,t=(0,b.iH)(null),o=(0,b.iH)(null),n=(0,b.iH)(!1);const s=(0,j.oR)();(async()=>{await s.dispatch("getUserData"),s.state.user||To.push({path:"/user"})})(),(async()=>{n.value=!0,await s.dispatch("fetchNotes"),n.value=!1})(),t=(0,a.Fl)((()=>""===o.value||null===o.value||"All"===o.value?(e=s.state.notes,[...e].reverse()):(e=s.state.notes.filter((e=>e.category===o.value)),[...e].reverse())));let r=e=>{o.value=e};return{showingNotes:t,filteredNotes:r,store:s,loadShow:n}}};const se=(0,w.Z)(ae,[["render",_],["__scopeId","data-v-c2a70bb6"]]);var re=se;function le(e,t,o,n,s,r){const l=(0,a.up)("actionContainer"),i=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{page:"Create",type:2,btnOne:"discard",onButtonConfirm:n.createNote,onButtonOne:n.discard},null,8,["onButtonConfirm","onButtonOne"]),(0,a.Wm)(i,{show:n.loadShow},null,8,["show"])],64)}const ie=e=>((0,a.dD)("data-v-3fd25344"),e=e(),(0,a.Cn)(),e),ce={key:0,class:"partWrapper_np"},ue={class:"noteOptions_np"},pe={key:0,class:"bi bi-trash-fill"},de={key:1,class:"bi bi-x-circle"},me={class:"noteWrapper_np"},ge={class:"category_np"},we=(0,a.Uk)(" category: "),he={class:"content_np"},ve=ie((()=>(0,a._)("button",{type:"submit"},"confirm",-1)));function fe(e,t,o,s,r,l){return s.theNote||2===o.type?((0,a.wg)(),(0,a.iD)("div",ce,[(0,a._)("div",ue,[(0,a._)("h1",null,(0,k.zw)(o.page),1),(0,a._)("button",{class:"deleteButton",onClick:t[0]||(t[0]=(...e)=>s.buttonOne&&s.buttonOne(...e))},[1===o.type?((0,a.wg)(),(0,a.iD)("i",pe)):((0,a.wg)(),(0,a.iD)("i",de)),(0,a.Uk)((0,k.zw)(o.btnOne),1)])]),(0,a._)("div",me,[s.theNote||2===o.type?((0,a.wg)(),(0,a.iD)("form",{key:0,class:"noteContainer_np",onSubmit:t[4]||(t[4]=(0,n.iM)(((...e)=>s.buttonConfirm&&s.buttonConfirm(...e)),["prevent"]))},[(0,a._)("h1",null,[(0,a.wy)((0,a._)("input",{class:"inputTitle_np","onUpdate:modelValue":t[1]||(t[1]=e=>s.title=e),type:"text",required:""},null,512),[[n.nr,s.title]])]),(0,a._)("div",ge,[we,(0,a.wy)((0,a._)("input",{class:"inputCategory_np","onUpdate:modelValue":t[2]||(t[2]=e=>s.category=e),type:"text"},null,512),[[n.nr,s.category]])]),(0,a._)("div",he,[(0,a.wy)((0,a._)("textarea",{class:"inputContent_np","onUpdate:modelValue":t[3]||(t[3]=e=>s.content=e)},null,512),[[n.nr,s.content]])]),ve],32)):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)}var ye={name:"actionContainer",props:["note","btnOne","type","page"],setup(e,t){const o=(0,b.iH)(e.note);let n=(0,b.iH)(null),a=(0,b.iH)(null),s=(0,b.iH)(null);e.note&&(n.value=o.value.title,a.value=o.value.category,s.value=o.value.content);const r=async()=>{t.emit("buttonConfirm",{title:n.value,category:a.value,content:s.value})},l=async()=>{t.emit("buttonOne")};return{theNote:o,title:n,category:a,content:s,buttonConfirm:r,buttonOne:l}}};const _e=(0,w.Z)(ye,[["render",fe],["__scopeId","data-v-3fd25344"]]);var be=_e,ke=o(678),Ce={name:"createPage",components:{actionContainer:be,loadingPage:ne},setup(){let e=!1,t=(0,b.iH)(!1);const o=(0,j.oR)(),n=async({title:n,category:a,content:s})=>{e=!0,t.value=!0,await o.dispatch({type:"createNote",payload:{title:n,category:a,content:s}}),t.value=!1},a=()=>{To.push({path:"/notes"})};return(0,ke.iS)(((t,o,n)=>{if(!0!==e){const e=confirm("all changes will not be saved. Are you sure?");e?n():n(!1)}else n()})),{createNote:n,discard:a,loadShow:t}}};const Ne=(0,w.Z)(Ce,[["render",le],["__scopeId","data-v-8e001138"]]);var Pe=Ne;const De={key:1,class:"loadWrap_np"},Ue=(0,a._)("div",{class:"load_np"},"loading",-1),Se=(0,a._)("div",{class:"loadBar_np"},null,-1),He=[Ue,Se];function We(e,t,o,n,s,r){const l=(0,a.up)("router-view");return n.note?((0,a.wg)(),(0,a.j4)(l,{key:0,note:n.note},null,8,["note"])):((0,a.wg)(),(0,a.iD)("div",De,He))}var Oe={name:"notePage",setup(){const e=(0,ke.yj)(),t=(0,j.oR)();let o=e.params.id;const n=(0,b.iH)(null);return(async()=>{const e={method:"GET",headers:{Authorization:`Bearer ${t.state.user.token}`}},a=await fetch(`https://jotes-back-end.herokuapp.com/notes/${o}`,e);a.ok?n.value=await a.json():To.push({path:"/notes"})})(),{note:n}}};const je=(0,w.Z)(Oe,[["render",We]]);var Be=je;const Ee={key:0,class:"partWrapper_np"},Ie={class:"noteOptions_np"},Te=(0,a._)("h1",null,null,-1),qe=(0,a._)("i",{class:"bi bi-pencil-square"},null,-1),Le=(0,a.Uk)("edit"),ze=(0,a._)("i",{class:"bi bi-trash-fill"},null,-1),Re=(0,a.Uk)("delete "),Fe=[ze,Re],Ze={class:"noteWrapper_np"},Ae={class:"noteContainer_np"},xe={key:0,class:"category_np"},Me={class:"content_np"};function $e(e,t,o,n,s,r){const l=(0,a.up)("router-link"),i=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.theNote?((0,a.wg)(),(0,a.iD)("div",Ee,[(0,a._)("div",Ie,[Te,(0,a.Wm)(l,{class:"editButton_np",to:{path:"/notes/"+o.note._id+"/edit"}},{default:(0,a.w5)((()=>[qe,Le])),_:1},8,["to"]),(0,a._)("button",{class:"deleteButton",onClick:t[0]||(t[0]=(...e)=>n.deleteNote&&n.deleteNote(...e))},Fe)]),(0,a._)("div",Ze,[(0,a._)("div",Ae,[(0,a._)("h1",null,(0,k.zw)(n.theNote.title),1),""!==n.theNote.category&&null!==n.theNote.category?((0,a.wg)(),(0,a.iD)("div",xe," category: "+(0,k.zw)(n.theNote.category),1)):(0,a.kq)("",!0),(0,a._)("div",Me,(0,k.zw)(n.theNote.content),1)])])])):(0,a.kq)("",!0),(0,a.Wm)(i,{show:n.loadShow},null,8,["show"])],64)}var Ve={name:"notePageContainer",props:["note"],components:{loadingPage:ne},setup(e){const t=(0,b.iH)(e.note);let o=(0,b.iH)(!1);const n=(0,j.oR)(),a=async()=>{o.value=!0;let e=await n.dispatch({type:"deleteNote",payload:{id:t.value._id}});!0===e&&To.push({path:"/notes"}),o.value=!1};return{theNote:t,deleteNote:a,loadShow:o}}};const Je=(0,w.Z)(Ve,[["render",$e]]);var Ye=Je;function Ge(e,t,o,n,s,r){const l=(0,a.up)("actionContainer"),i=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{page:"Edit",type:1,btnOne:"delete",note:n.theNote,onButtonOne:n.deleteNote,onButtonConfirm:n.editHandler},null,8,["note","onButtonOne","onButtonConfirm"]),(0,a.Wm)(i,{show:n.loadShow},null,8,["show"])],64)}var Ke={name:"editPage",props:["note"],components:{actionContainer:be,loadingPage:ne},setup(e){const t=(0,b.iH)(e.note),o=(0,j.oR)();let n=(0,b.iH)(!1),a=!1;const s=async({title:e,category:s,content:r})=>{n.value=!0;const l=await o.dispatch({type:"editNote",payload:{title:e,category:s,content:r,id:t.value._id}});!0!==l?console.log(l):(a=!0,o.dispatch({type:"fetchNotes"}),To.push({path:`/notes/${t.value._id}`})),n.value=!1},r=async()=>{n.value=!0;let e=await o.dispatch({type:"deleteNote",payload:{id:t.value._id}});!0!==e?console.log(e):!0===e&&(a=!0,o.dispatch({type:"fetchNotes"}),To.push({path:"/notes"})),n.value=!1};return(0,ke.iS)(((e,t,o)=>{if(!0!==a){const e=confirm("all changes will not be saved. Are you sure?");e?o():o(!1)}else o()})),{theNote:t,editHandler:s,deleteNote:r,loadShow:n}}};const Qe=(0,w.Z)(Ke,[["render",Ge],["__scopeId","data-v-e2ae9eb6"]]);var Xe=Qe;const et={class:"mobileSelection_um"},tt={class:"userMainWrap",ref:"forScroll"},ot={class:"userMain"},nt={key:0,class:"errorContain"},at=(0,a._)("i",{class:"bi bi-exclamation"},null,-1),st={key:1,class:"infoContain"},rt=(0,a._)("i",{class:"bi bi-info-circle-fill"},null,-1),lt={class:"userMainContain"};function it(e,t,o,n,s,r){const l=(0,a.up)("userLogin"),i=(0,a.up)("userRegister");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",et,[(0,a._)("div",{class:"selectionWrap_um",onClick:t[0]||(t[0]=e=>n.selectUpdate(e))},[(0,a._)("span",{class:(0,k.C_)({select_um:!0,selected:"login"===n.mobileSelect}),value:"login",id:"userLoginButton"},"Login",2),(0,a._)("span",{class:(0,k.C_)({select_um:!0,selected:"register"===n.mobileSelect}),value:"register",id:"userRegisterButton"},"Register",2)])]),(0,a._)("div",tt,[(0,a._)("div",ot,[n.error?((0,a.wg)(),(0,a.iD)("div",nt,[at,(0,a.Uk)(" "+(0,k.zw)(n.error),1)])):n.info?((0,a.wg)(),(0,a.iD)("div",st,[rt,(0,a.Uk)(" "+(0,k.zw)(n.info),1)])):(0,a.kq)("",!0),(0,a._)("div",lt,[(0,a.Wm)(l,{onErrorUpdate:n.errorUpdate,selected:n.mobileSelect},null,8,["onErrorUpdate","selected"]),(0,a.Wm)(i,{onErrorUpdate:n.errorUpdate,onInfoUpdate:n.infoUpdate,selected:n.mobileSelect},null,8,["onErrorUpdate","onInfoUpdate","selected"])])])],512)],64)}const ct={class:"inputField_up"},ut={class:"controlContainer_up"},pt=(0,a._)("label",{for:"loginEmail"},"Email:",-1),dt={class:"controlContainer_up"},mt=(0,a._)("label",{for:"loginPassword"},"Password:",-1);function gt(e,t,o,s,r,l){const i=(0,a.up)("userContainer"),c=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(i,{title:"Login",buttonName:"login",onFormSubmit:s.loginUser,id:"userLoginForm",class:(0,k.C_)({action:"login"===o.selected})},{default:(0,a.w5)((()=>[(0,a._)("div",ct,[(0,a._)("div",ut,[pt,(0,a.wy)((0,a._)("input",{id:"loginEmail",type:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e)},null,512),[[n.nr,s.email]])]),(0,a._)("div",dt,[mt,(0,a.wy)((0,a._)("input",{id:"loginPassword",type:"password",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e)},null,512),[[n.nr,s.password]])])])])),_:1},8,["onFormSubmit","class"]),(0,a.Wm)(c,{show:s.loadShow},null,8,["show"])],64)}const wt={class:"userContainer_up"},ht={key:0,class:"imgContainer_up"},vt=(0,a._)("img",{class:"img_up",src:"https://images.pexels.com/photos/952670/pexels-photo-952670.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"},null,-1),ft=(0,a._)("span",null,"Welcome",-1),yt=[vt,ft],_t={class:"title_up"},bt={class:"userMainButton_up",type:"submit"};function kt(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",wt,["Login"===o.title?((0,a.wg)(),(0,a.iD)("div",ht,yt)):(0,a.kq)("",!0),(0,a._)("div",_t,(0,k.zw)(o.title),1),(0,a._)("form",{class:"userForm_up",onSubmit:t[0]||(t[0]=(...e)=>n.formSubmit&&n.formSubmit(...e))},[(0,a.WI)(e.$slots,"default"),(0,a._)("button",bt,(0,k.zw)(o.buttonName),1)],32)])}var Ct={props:["title","buttonName"],setup(e,t){const o=e=>{e.preventDefault(),t.emit("formSubmit")};return{formSubmit:o}}};const Nt=(0,w.Z)(Ct,[["render",kt]]);var Pt=Nt,Dt={name:"userLogin",props:["selected"],components:{userContainer:Pt,loadingPage:ne},setup(e,t){let o=(0,b.iH)(null),n=(0,b.iH)(null),a=(0,b.iH)(!1);const s=(0,j.oR)(),r=(0,ke.tv)();s.dispatch("getUserData"),s.getters.getUser&&r.push({path:"/notes"});const l=async()=>{a.value=!0;let e=await s.dispatch({type:"userLogin",payload:{email:o.value,password:n.value}});!0===e?console.log("login success"):t.emit("errorUpdate",e),a.value=!1};return{email:o,password:n,loginUser:l,loadShow:a}}};const Ut=(0,w.Z)(Dt,[["render",gt]]);var St=Ut;const Ht={class:"inputField_up"},Wt={class:"controlContainer_up"},Ot=(0,a._)("label",{for:"registerName"},"Name:",-1),jt={class:"controlContainer_up"},Bt=(0,a._)("label",{for:"registerEmail"},"Email:",-1),Et={class:"controlContainer_up"},It=(0,a._)("label",{for:"registerPassword"},"Password:",-1),Tt={class:"controlContainer_up"},qt=(0,a._)("label",{for:"registerConfirm"},"Confirm Password:",-1);function Lt(e,t,o,s,r,l){const i=(0,a.up)("userContainer"),c=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(i,{title:"Sign Up",buttonName:"register",onFormSubmit:s.registerUser,id:"userRegisterForm",class:(0,k.C_)({action:"register"===o.selected})},{default:(0,a.w5)((()=>[(0,a._)("div",Ht,[(0,a._)("div",Wt,[Ot,(0,a.wy)((0,a._)("input",{id:"registerName",type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e)},null,512),[[n.nr,s.name]])]),(0,a._)("div",jt,[Bt,(0,a.wy)((0,a._)("input",{id:"registerEmail",type:"email",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>s.email=e)},null,512),[[n.nr,s.email]])]),(0,a._)("div",Et,[It,(0,a.wy)((0,a._)("input",{id:"registerPassword",type:"password",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>s.password=e)},null,512),[[n.nr,s.password]])]),(0,a._)("div",Tt,[qt,(0,a.wy)((0,a._)("input",{id:"registerConfirm",type:"password",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>s.confirmPwd=e)},null,512),[[n.nr,s.confirmPwd]])])])])),_:1},8,["onFormSubmit","class"]),(0,a.Wm)(c,{show:s.loadShow},null,8,["show"])],64)}var zt={name:"userRegister",props:["selected"],components:{userContainer:Pt,loadingPage:ne},setup(e,t){let o=(0,b.iH)(null),n=(0,b.iH)(null),a=(0,b.iH)(null),s=(0,b.iH)(null),r=(0,b.iH)(!1);const l=(0,j.oR)(),i=async()=>{if(a.value.length<8)return void t.emit("errorUpdate","password length cannot less than 8 letters");if(a.value!==s.value)return void t.emit("errorUpdate","password and comfirm password is not the same");r.value=!0;let e=await l.dispatch({type:"userRegister",payload:{name:o.value,email:n.value,password:a.value}});!1===e?t.emit("errorUpdate","an account with the same email already exists, please try again"):!0===e?(t.emit("infoUpdate","account created successfully, please try to login"),o.value="",n.value="",a.value="",s.value="",console.log("here"),document.getElementById("userRegisterButton").classList.remove("selected"),document.getElementById("userLoginButton").classList.add("selected"),document.getElementById("userRegisterForm").classList.remove("action"),document.getElementById("userLoginForm").classList.add("action")):t.emit("errorUpdate",e),r.value=!1};return{name:o,email:n,password:a,confirmPwd:s,registerUser:i,loadShow:r}}};const Rt=(0,w.Z)(zt,[["render",Lt]]);var Ft=Rt,Zt={components:{userLogin:St,userRegister:Ft},setup(){const e=(0,b.iH)(null);let t=(0,b.iH)(null),o=(0,b.iH)(null),n=(0,b.iH)("login");const a=e=>{t.value=e,setTimeout((()=>{l()}),500)},s=e=>{o.value=e,setTimeout((()=>{l()}),500)},r=e=>{const t=e.currentTarget.children,o=e.target.getAttribute("value");if(o!==n.value){n.value=o;for(let e=0;e<t.length;e++)t[e].classList.toggle("selected")}},l=()=>{e.value.scrollTo({top:0,behavior:"smooth"})};return{error:t,info:o,errorUpdate:a,infoUpdate:s,forScroll:e,selectUpdate:r,mobileSelect:n}}};const At=(0,w.Z)(Zt,[["render",it]]);var xt=At;const Mt={class:"userProfile",ref:"forScroll"};function $t(e,t,o,n,s,r){const l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",Mt,[(0,a.Wm)(l,{user:n.user,notes:n.notes,onScrollTop:n.scroll},null,8,["user","notes","onScrollTop"])],512)}const Vt=(0,a._)("i",{class:"bi bi-pencil-square"},null,-1),Jt=(0,a._)("div",{class:"relativeImgContainer"},[(0,a._)("div",{class:"imgContainer"},[(0,a._)("img",{class:"profileImage",src:"/avatar1.png"}),(0,a._)("i",{class:"bi bi-image-alt"},[(0,a._)("a",{href:"https://www.freepik.com/vectors/teenager",target:"_blank"},"Teenager vector created by studiogstock - www.freepik.com")])])],-1),Yt={class:"nameSpan"},Gt={key:0};function Kt(e,t,o,n,s,r){const l=(0,a.up)("router-link"),i=(0,a.up)("profileTemplate");return o.user?((0,a.wg)(),(0,a.j4)(i,{key:0,type:"main"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{to:{name:"profileEdit"},class:"editButton"},{default:(0,a.w5)((()=>[Vt])),_:1}),Jt,(0,a._)("span",Yt,(0,k.zw)(o.user.name),1),(0,a._)("span",null,"Email: "+(0,k.zw)(o.user.email),1),o.notes?((0,a.wg)(),(0,a.iD)("span",Gt," Total notes: "+(0,k.zw)(o.notes.length),1)):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0)}const Qt=e=>((0,a.dD)("data-v-a4eb245e"),e=e(),(0,a.Cn)(),e),Xt={class:"profileContainer_pp"},eo={key:0,class:"errorContain"},to=Qt((()=>(0,a._)("i",{class:"bi bi-exclamation"},null,-1))),oo=Qt((()=>(0,a._)("span",{class:"hiSpan"},"hi",-1)));function no(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",Xt,["edit"===o.type&&o.error?((0,a.wg)(),(0,a.iD)("div",eo,[to,(0,a.Uk)(" "+(0,k.zw)(o.error),1)])):(0,a.kq)("",!0),oo,(0,a.WI)(e.$slots,"default",{},void 0,!0)])}var ao={props:["type","error"],setup(){}};const so=(0,w.Z)(ao,[["render",no],["__scopeId","data-v-a4eb245e"]]);var ro=so,lo={components:{profileTemplate:ro},props:["user","notes"],setup(){}};const io=(0,w.Z)(lo,[["render",Kt]]);var co=io,uo={name:"userProfile",components:{profileMain:co},setup(){const e=(0,j.oR)();let t=(0,b.iH)(null);if(e.dispatch("getUserData"),e.dispatch({type:"fetchNotes"}),!e.state.user)return void To.push({path:"/user"});const o=(0,a.Fl)((()=>e.state.user)),n=(0,a.Fl)((()=>e.state.notes)),s=()=>{setTimeout((()=>{t.value.scrollTo({top:0,behavior:"smooth"})}),500)};return{store:e,user:o,notes:n,forScroll:t,scroll:s}}};const po=(0,w.Z)(uo,[["render",$t],["__scopeId","data-v-4ee62a0b"]]);var mo=po;const go=e=>((0,a.dD)("data-v-1fbca9f3"),e=e(),(0,a.Cn)(),e),wo=go((()=>(0,a._)("div",{class:"relativeImgContainer"},[(0,a._)("div",{class:"imgContainer"},[(0,a._)("img",{class:"profileImage",src:"/avatar1.png"}),(0,a._)("i",{class:"bi bi-image-alt"},[(0,a._)("a",{href:"https://www.freepik.com/vectors/teenager",target:"_blank"},"Teenager vector created by studiogstock - www.freepik.com")])])],-1))),ho=go((()=>(0,a._)("label",{for:"password_pp"},"Password: ",-1))),vo=go((()=>(0,a._)("i",{class:"bi bi-shield-lock-fill"},null,-1))),fo=(0,a.Uk)(" Change Password "),yo=[vo,fo],_o={key:0},bo={class:"controlPwd"},ko=go((()=>(0,a._)("label",{class:"labelNewPwd",for:"newPassword"},"New Password: ",-1))),Co={class:"controlPwd"},No=go((()=>(0,a._)("label",{class:"labelNewPwd",for:"confirmNewPassword"},"Confirm New Password: ",-1))),Po={class:"buttonWrap"},Do=go((()=>(0,a._)("i",{class:"bi bi-trash-fill"},null,-1))),Uo=(0,a.Uk)("Delete Account "),So=[Do,Uo],Ho=go((()=>(0,a._)("i",{class:"bi bi-pencil-square"},null,-1))),Wo=(0,a.Uk)(" Done Edit "),Oo=[Ho,Wo];function jo(e,t,o,s,r,l){const i=(0,a.up)("profileTemplate"),c=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[o.user?((0,a.wg)(),(0,a.j4)(i,{key:0,type:"edit",error:s.error},{default:(0,a.w5)((()=>[(0,a._)("form",{onSubmit:t[7]||(t[7]=(0,n.iM)((()=>{}),["prevent"]))},[wo,(0,a.wy)((0,a._)("input",{class:"nameSpan","onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e),required:""},null,512),[[n.nr,s.name]]),(0,a._)("span",null,"Email: "+(0,k.zw)(o.user.email),1),(0,a._)("div",null,[ho,(0,a.wy)((0,a._)("input",{type:"password",id:"password_pp","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),required:""},null,512),[[n.nr,s.password]])]),(0,a._)("span",{class:"changeButton",onClick:t[2]||(t[2]=(...e)=>s.updateChangePwd&&s.updateChangePwd(...e))},yo),s.changePwd?((0,a.wg)(),(0,a.iD)("div",_o,[(0,a._)("div",bo,[ko,(0,a.wy)((0,a._)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[3]||(t[3]=e=>s.newPassword=e),required:"",class:"inputControl"},null,512),[[n.nr,s.newPassword]])]),(0,a._)("div",Co,[No,(0,a.wy)((0,a._)("input",{type:"password",id:"confirmNewPassword","onUpdate:modelValue":t[4]||(t[4]=e=>s.confirmNewPassword=e),required:"",class:"inputControl"},null,512),[[n.nr,s.confirmNewPassword]])])])):(0,a.kq)("",!0),(0,a._)("div",Po,[(0,a._)("button",{class:"deleteButton",type:"submit",onClick:t[5]||(t[5]=(...e)=>s.deleteUser&&s.deleteUser(...e))},So),(0,a._)("button",{class:"doneButton",type:"submit",onClick:t[6]||(t[6]=(...e)=>s.editUser&&s.editUser(...e))},Oo)])],32)])),_:1},8,["error"])):(0,a.kq)("",!0),(0,a.Wm)(c,{show:s.loadShow},null,8,["show"])],64)}var Bo={name:"profileEdit",props:["user","notes"],components:{profileTemplate:ro,loadingPage:ne},setup(e,t){let o=(0,b.iH)(e.user.name),n=(0,b.iH)(null),a=(0,b.iH)(null),s=(0,b.iH)(null),r=(0,b.iH)(null),l=!1,i=(0,b.iH)(!1),c=(0,b.iH)(!1);const u=(0,j.oR)(),p=()=>{i.value=!i.value},d=async e=>{c.value=!0;let t=await u.dispatch({type:"userEdit",payload:{password:n.value,name:o.value,changePwd:i.value,newPassword:a.value}});!0!==t?g(t):(l=!0,To.push({path:"/user/profile"})),c.value=!1},m=async e=>{c.value=!0;let t=await u.dispatch({type:"userDelete",payload:{password:n.value}});!0!==t?g(t):(l=!0,console.log("delete success"),To.push({path:"/"})),c.value=!1},g=e=>{r.value=e,t.emit("scrollTop")};return(0,ke.iS)(((e,t,o)=>{if(!0!==l){const e=confirm("all changes will not be saved. Are you sure?");e?o():o(!1)}else o()})),{name:o,password:n,newPassword:a,confirmNewPassword:s,updateChangePwd:p,changePwd:i,editUser:d,deleteUser:m,error:r,loadShow:c}}};const Eo=(0,w.Z)(Bo,[["render",jo],["__scopeId","data-v-1fbca9f3"]]);var Io=Eo;const To=(0,ke.p7)({history:(0,ke.PO)("/Jotes/"),routes:[{path:"/",name:"homePage",component:v},{path:"/user",name:"userMain",component:xt},{path:"/user/profile",name:"userProfile",component:mo,children:[{path:"",name:"profileMain",component:co},{path:"edit",name:"profileEdit",component:Io}]},{path:"/notes",name:"notesPage",component:re,children:[{path:"create",component:Pe},{path:":id",name:"notePage",component:Be,children:[{path:"",component:Ye},{path:":edit",component:Xe}]}]},{path:"/:others",redirect:"/",component:v}]}),qo={getUserData(e){let t=JSON.parse(sessionStorage.getItem("userData"));e.commit("saveUser",t)},async userRegister({dispatch:e},{payload:t}){let o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,password:t.password})};try{let e=await fetch("https://jotes-back-end.herokuapp.com/users",o);return!!e.ok}catch(n){return n}},async userLogin({dispatch:e},{payload:{email:t,password:o}}){let n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:o})};try{console.log("https://jotes-back-end.herokuapp.com");let t=await fetch("https://jotes-back-end.herokuapp.com/users/login",n),o=await t.json();return t.ok?(sessionStorage.setItem("userData",JSON.stringify(o)),e("getUserData"),To.push({path:"/notes"}),!0):"invalid email or password"}catch(a){return a.message}},async userLogout({dispatch:e}){sessionStorage.removeItem("userData"),e("getUserData"),To.push({path:"/"})},async userEdit({dispatch:e,state:t},{payload:o}){const n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:o.password,name:o.name,changePwd:o.changePwd,email:t.user.email,newPassword:o.newPassword})};try{let t=await fetch("https://jotes-back-end.herokuapp.com/users/profile",n),o=await t.json();return t.ok?(sessionStorage.setItem("userData",JSON.stringify(o)),e({type:"getUserData"}),!0):o.message}catch(a){return a}},async userDelete({dispatch:e,state:t},{payload:o}){let n=confirm("Are you sure you want to delete this account?");const a={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.user.email,password:o.password})};if(n)try{let t=await fetch("https://jotes-back-end.herokuapp.com/users/profile",a),o=await t.json();return t.ok?(sessionStorage.removeItem("userData"),console.log("dispatch success"),e({type:"getUserData"}),!0):o.message}catch(s){return s}}};var Lo=qo;const zo={async fetchNotes({commit:e,state:t}){const o={method:"GET",headers:{Authorization:`Bearer ${t.user.token}`}},n=await fetch("https://jotes-back-end.herokuapp.com/notes",o).then((e=>e.json()));e("updateNotes",n)},async editNote({state:e},{payload:{title:t,category:o,content:n,id:a}}){const s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.user.token}`},body:JSON.stringify({title:t,category:o,content:n})};try{const e=await fetch(`https://jotes-back-end.herokuapp.com/notes/${a}`,s);return!!e.ok||"note not found"}catch(r){return"error when request for note editing"}},async createNote({state:e,dispatch:t},{payload:{title:o,category:n,content:a}}){const s={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.user.token}`},body:JSON.stringify({title:o,category:n,content:a})};try{const e=await fetch("https://jotes-back-end.herokuapp.com/notes/create",s);return e.ok?(t("fetchNotes"),To.push({path:"/notes"}),!0):"error when creating new note"}catch(r){return r}},async deleteNote({dispatch:e,state:t},{payload:{id:o}}){let n=confirm("Are you sure?");if(!n)return!1;{const n={method:"DELETE",headers:{Authorization:`Bearer ${t.user.token}`}};try{const t=await fetch(`https://jotes-back-end.herokuapp.com/notes/${o}`,n);return t.ok?(e("fetchNotes"),!0):"error when delete note"}catch(a){return a}}}};var Ro=zo;const Fo=(0,j.MT)({state:{user:null,notes:null},getters:{getUser(e){return e.user},getNotes(e){return e.notes}},mutations:{saveUser(e,t){e.user=t},updateNotes(e,t){e.notes=t}},actions:{...Lo,...Ro}});var Zo=Fo;function Ao(e,t,o,n,s,r){const l=(0,a.up)("appsHeader"),i=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{title:"Jotes"}),(0,a.Wm)(i)],64)}const xo={id:"header"},Mo={class:"titleContainer"};function $o(e,t,o,n,s,r){const l=(0,a.up)("router-link"),i=(0,a.up)("profileComponent");return(0,a.wg)(),(0,a.iD)("div",xo,[(0,a._)("div",Mo,[(0,a.Wm)(l,{class:"title",to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(o.title),1)])),_:1})]),(0,a.Wm)(i)])}const Vo={class:"profileWrap",ref:"test"},Jo={class:"profileContainer"},Yo={key:0},Go={class:"profileDetail"},Ko=(0,a.Uk)("my notes"),Qo={key:1};function Xo(e,t,o,s,r,l){const i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Vo,[(0,a._)("i",{class:"bi bi-person-circle",onClick:t[0]||(t[0]=(0,n.iM)(((...e)=>s.clickHandler&&s.clickHandler(...e)),["stop"]))}),(0,a.wy)((0,a._)("div",Jo,[s.store.state.user?((0,a.wg)(),(0,a.iD)("div",Yo,[(0,a._)("div",{class:"profileDetail",onClick:t[1]||(t[1]=(...e)=>s.profile&&s.profile(...e))},(0,k.zw)(s.store.state.user.name),1),(0,a._)("div",Go,[(0,a.Wm)(i,{class:"link",to:"/notes"},{default:(0,a.w5)((()=>[Ko])),_:1})]),(0,a._)("div",{class:"profileDetail",onClick:t[2]||(t[2]=(...e)=>s.logout&&s.logout(...e))},"logout")])):((0,a.wg)(),(0,a.iD)("div",Qo,[(0,a._)("div",{class:"profileDetail",onClick:t[3]||(t[3]=(...e)=>s.login&&s.login(...e))},"login")]))],512),[[n.F8,s.profileShow]])],512)}var en={name:"profileComponent",setup(){let e=(0,b.iH)(!1),t=(0,b.iH)(null),o=(0,j.oR)();(0,a.bv)((()=>{document.addEventListener("mousedown",s)}));const n=()=>{e.value=!e.value},s=o=>{t.value.contains(o.target)||(e.value=!1)},r=()=>{To.push({path:"/user"})},l=async()=>{await o.dispatch("userLogout")},i=()=>{To.push({path:"/user/profile"})};return{profileShow:e,clickHandler:n,test:t,store:o,login:r,logout:l,profile:i}}};const tn=(0,w.Z)(en,[["render",Xo],["__scopeId","data-v-11ca2c6e"]]);var on=tn,nn={name:"appsHeader",components:{profileComponent:on},props:{title:String},setup(){let e=(0,j.oR)();e.dispatch("getUserData")}};const an=(0,w.Z)(nn,[["render",$o],["__scopeId","data-v-4c9f449b"]]);var sn=an,rn={name:"App",components:{appsHeader:sn}};const ln=(0,w.Z)(rn,[["render",Ao]]);var cn=ln;(0,n.ri)(cn).use(To).use(Zo).mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,s){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],s=e[u][2];for(var l=!0,i=0;i<n.length;i++)(!1&s||r>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(l=!1,s<r&&(r=s));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,a,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,s,r=n[0],l=n[1],i=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(i)var u=i(o)}for(t&&t(n);c<r.length;c++)s=r[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(9690)}));n=o.O(n)})();
//# sourceMappingURL=app.011886ae.js.map