(function(){"use strict";var e={3258:function(e,t,n){var o=n(9242),a=n(3396);const r=e=>((0,a.dD)("data-v-decf29c6"),e=e(),(0,a.Cn)(),e),s={class:"pageWrap_hp"},i={class:"wallpaperWrap_hp"},l=r((()=>(0,a._)("img",{class:"wallpaper_hp",src:"https://images.pexels.com/photos/442574/pexels-photo-442574.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"},null,-1))),c={class:"mainInfo_hp"},u=r((()=>(0,a._)("span",{class:"title"},"Create Your Notes in Jotes",-1))),p=r((()=>(0,a._)("span",null,"Login or Sign Up",-1))),d=(0,a.Uk)("Here");function m(e,t,n,o,r,m){const f=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",i,[l,(0,a._)("div",c,[u,p,(0,a.Wm)(f,{to:{name:"userMain"},class:"linkButton"},{default:(0,a.w5)((()=>[d])),_:1})])])])}var f={name:"homePage"},g=n(89);const w=(0,g.Z)(f,[["render",m],["__scopeId","data-v-decf29c6"]]);var h=w;const v={key:0,class:"mainPage"},y={class:"notes"};function _(e,t,n,o,r,s){const i=(0,a.up)("category-bar"),l=(0,a.up)("noteContainer"),c=(0,a.up)("router-view");return o.store.getters.getNotes?((0,a.wg)(),(0,a.iD)("div",v,[(0,a.Wm)(i,{notes:o.store.getters.getNotes,onFilter:o.filteredNotes},null,8,["notes","onFilter"]),(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.showingNotes,(e=>((0,a.wg)(),(0,a.j4)(l,{key:e,note:e,onFilter:o.filteredNotes},null,8,["note","onFilter"])))),128))]),((0,a.wg)(),(0,a.j4)(c,{key:e.$route.fullPath,class:"partWrapper"}))])):(0,a.kq)("",!0)}var b=n(4870),k=n(7139);const C={class:"noteWrapper"},N={class:"topWrapper"},U={class:"date"},D={class:"title"},P={class:"content"};function H(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("div",C,[(0,a._)("div",N,[(0,a._)("span",U,(0,k.zw)(o.date),1)]),(0,a._)("div",{class:"bottomWrapper",onClick:t[1]||(t[1]=(...e)=>o.noteNavigate&&o.noteNavigate(...e))},[(0,a._)("h1",D,(0,k.zw)(n.note.title),1),""!==n.note.category&&null!==n.note.category?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"category",onClick:t[0]||(t[0]=e=>o.filter(n.note.category))},(0,k.zw)(n.note.category),1)):(0,a.kq)("",!0),(0,a._)("p",P,(0,k.zw)(n.note.content),1)])])}const S={class:"optionMain",ref:"option"},O={class:"options"};function j(e,t,n,r,s,i){return(0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("i",{class:"bi bi-three-dots",onClick:t[0]||(t[0]=(...e)=>r.clickHandler&&r.clickHandler(...e))}),(0,a.wy)((0,a._)("div",O,[(0,a._)("span",{onClick:t[1]||(t[1]=(...e)=>r.editNote&&r.editNote(...e))},"edit"),(0,a._)("span",{onClick:t[2]||(t[2]=(...e)=>r.deleteNote&&r.deleteNote(...e))},"delete")],512),[[o.F8,r.showOptions]])],512)}var T=n(65),E={name:"noteOptions",props:["noteId"],setup(e){let t=(0,b.iH)(!1),n=(0,b.iH)(null);const o=(0,T.oR)();(0,a.bv)((()=>{document.addEventListener("mousedown",s)})),(0,a.Ah)((()=>{document.removeEventListener("mousedown",s)}));const r=()=>{t.value=!t.value},s=e=>{n.value.contains(e.target)||(t.value=!1)},i=()=>{bn.push({path:`/notes/${e.noteId}/edit`})},l=async()=>{o.dispatch({type:"deleteNote",payload:{id:e.noteId}})};return{showOptions:t,clickHandler:r,option:n,deleteNote:l,editNote:i}}};const I=(0,g.Z)(E,[["render",j],["__scopeId","data-v-1e482718"]]);var W=I,q={name:"noteContainer",props:["note"],components:{noteOptions:W},setup(e,t){const n=e=>{t.emit("filter",e)},o=new Date(e.note.updatedAt).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"}),a=()=>{bn.push({path:`/notes/${e.note._id}`})};return{filter:n,date:o,noteNavigate:a}}};const z=(0,g.Z)(q,[["render",H],["__scopeId","data-v-609c0140"]]);var B=z;const Z=e=>((0,a.dD)("data-v-685ec4fe"),e=e(),(0,a.Cn)(),e),F={class:"categoryBar"},L={class:"createWrap"},x=Z((()=>(0,a._)("i",{class:"bi bi-plus-circle-dotted"},null,-1))),A=(0,a.Uk)(" note"),R={key:0,class:"categoriesWrap"},M=["onClick"];function $(e,t,n,o,r,s){const i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("div",L,[(0,a.Wm)(i,{class:"create",to:"/notes/create"},{default:(0,a.w5)((()=>[x,A])),_:1})]),o.categories?((0,a.wg)(),(0,a.iD)("div",R,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.categories,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"categoryContainer",key:e,onClick:t=>o.onClick(t,e),ref_for:!0,ref:"categoryRef"},(0,k.zw)(e),9,M)))),128))])):(0,a.kq)("",!0)])}var V={name:"categoryBar",props:["notes"],setup(e,t){let n=(0,b.iH)(null),o=(0,b.iH)(null),r=(0,b.iH)(null);n=(0,a.Fl)((()=>{let t=["All"];return e.notes.map((e=>{t.includes(e.category)||""===e.category||null===e.category||t.push(e.category)})),t}));const s=(e,n)=>{for(let t=0;t<r.value.length;t++)r.value[t].classList.remove("selected");e.target.classList.toggle("selected"),o.value=n,t.emit("filter",n)};return(0,a.bv)((()=>{r.value[0].classList.add("selected")})),{categoryRef:r,categories:n,onClick:s,selected:o}}};const J=(0,g.Z)(V,[["render",$],["__scopeId","data-v-685ec4fe"]]);var Y=J,G={name:"notesPage",components:{noteContainer:B,categoryBar:Y},setup(){let e,t=(0,b.iH)(null),n=(0,b.iH)(null);const o=(0,T.oR)();if(o.dispatch("getUserData"),!o.state.user)return void bn.push({path:"/user"});o.dispatch("fetchNotes"),t=(0,a.Fl)((()=>""===n.value||null===n.value||"All"===n.value?(e=o.state.notes,[...e].reverse()):(e=o.state.notes.filter((e=>e.category===n.value)),[...e].reverse())));let r=e=>{n.value=e};return{showingNotes:t,filteredNotes:r,store:o}}};const K=(0,g.Z)(G,[["render",_],["__scopeId","data-v-4bec80cb"]]);var Q=K;function X(e,t,n,o,r,s){const i=(0,a.up)("actionContainer");return(0,a.wg)(),(0,a.j4)(i,{page:"Create",type:2,btnOne:"discard",onButtonConfirm:o.createNote,onButtonOne:o.discard},null,8,["onButtonConfirm","onButtonOne"])}const ee=e=>((0,a.dD)("data-v-3fd25344"),e=e(),(0,a.Cn)(),e),te={key:0,class:"partWrapper_np"},ne={class:"noteOptions_np"},oe={key:0,class:"bi bi-trash-fill"},ae={key:1,class:"bi bi-x-circle"},re={class:"noteWrapper_np"},se={class:"category_np"},ie=(0,a.Uk)(" category: "),le={class:"content_np"},ce=ee((()=>(0,a._)("button",{type:"submit"},"confirm",-1)));function ue(e,t,n,r,s,i){return r.theNote||2===n.type?((0,a.wg)(),(0,a.iD)("div",te,[(0,a._)("div",ne,[(0,a._)("h1",null,(0,k.zw)(n.page),1),(0,a._)("button",{class:"deleteButton",onClick:t[0]||(t[0]=(...e)=>r.buttonOne&&r.buttonOne(...e))},[1===n.type?((0,a.wg)(),(0,a.iD)("i",oe)):((0,a.wg)(),(0,a.iD)("i",ae)),(0,a.Uk)((0,k.zw)(n.btnOne),1)])]),(0,a._)("div",re,[r.theNote||2===n.type?((0,a.wg)(),(0,a.iD)("form",{key:0,class:"noteContainer_np",onSubmit:t[4]||(t[4]=(0,o.iM)(((...e)=>r.buttonConfirm&&r.buttonConfirm(...e)),["prevent"]))},[(0,a._)("h1",null,[(0,a.wy)((0,a._)("input",{class:"inputTitle_np","onUpdate:modelValue":t[1]||(t[1]=e=>r.title=e),type:"text",required:""},null,512),[[o.nr,r.title]])]),(0,a._)("div",se,[ie,(0,a.wy)((0,a._)("input",{class:"inputCategory_np","onUpdate:modelValue":t[2]||(t[2]=e=>r.category=e),type:"text"},null,512),[[o.nr,r.category]])]),(0,a._)("div",le,[(0,a.wy)((0,a._)("textarea",{class:"inputContent_np","onUpdate:modelValue":t[3]||(t[3]=e=>r.content=e)},null,512),[[o.nr,r.content]])]),ce],32)):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)}var pe={name:"actionContainer",props:["note","btnOne","type","page"],setup(e,t){const n=(0,b.iH)(e.note);let o=(0,b.iH)(null),a=(0,b.iH)(null),r=(0,b.iH)(null);e.note&&(o.value=n.value.title,a.value=n.value.category,r.value=n.value.content);const s=async()=>{t.emit("buttonConfirm",{title:o.value,category:a.value,content:r.value})},i=async()=>{t.emit("buttonOne")};return{theNote:n,title:o,category:a,content:r,buttonConfirm:s,buttonOne:i}}};const de=(0,g.Z)(pe,[["render",ue],["__scopeId","data-v-3fd25344"]]);var me=de,fe=n(678),ge={name:"createPage",components:{actionContainer:me},setup(){let e=!1;const t=(0,T.oR)(),n=async({title:n,category:o,content:a})=>{e=!0,t.dispatch({type:"createNote",payload:{title:n,category:o,content:a}})},o=()=>{bn.push({path:"/notes"})};return(0,fe.iS)(((t,n,o)=>{if(!0!==e){const e=confirm("all changes will not be saved. Are you sure?");e?o():o(!1)}else o()})),{createNote:n,discard:o}}};const we=(0,g.Z)(ge,[["render",X],["__scopeId","data-v-1f9f1daf"]]);var he=we;function ve(e,t,n,o,r,s){const i=(0,a.up)("router-view");return o.note?((0,a.wg)(),(0,a.j4)(i,{key:0,note:o.note},null,8,["note"])):(0,a.kq)("",!0)}var ye={name:"notePage",setup(){const e=(0,fe.yj)(),t=(0,T.oR)();let n=e.params.id;const o=(0,b.iH)(null);return(async()=>{const e={method:"GET",headers:{Authorization:`Bearer ${t.state.user.token}`}},a=await fetch(`https://jotes-back-end.herokuapp.com/notes/${n}`,e);a.ok?o.value=await a.json():bn.push({path:"/notes"})})(),{note:o}}};const _e=(0,g.Z)(ye,[["render",ve]]);var be=_e;const ke={key:0,class:"partWrapper_np"},Ce={class:"noteOptions_np"},Ne=(0,a._)("h1",null,null,-1),Ue=(0,a._)("i",{class:"bi bi-pencil-square"},null,-1),De=(0,a.Uk)("edit"),Pe=(0,a._)("i",{class:"bi bi-trash-fill"},null,-1),He=(0,a.Uk)("delete "),Se=[Pe,He],Oe={class:"noteWrapper_np"},je={class:"noteContainer_np"},Te={key:0,class:"category_np"},Ee={class:"content_np"};function Ie(e,t,n,o,r,s){const i=(0,a.up)("router-link");return o.theNote?((0,a.wg)(),(0,a.iD)("div",ke,[(0,a._)("div",Ce,[Ne,(0,a.Wm)(i,{class:"editButton_np",to:{path:"/notes/"+n.note._id+"/edit"}},{default:(0,a.w5)((()=>[Ue,De])),_:1},8,["to"]),(0,a._)("button",{class:"deleteButton",onClick:t[0]||(t[0]=(...e)=>o.deleteNote&&o.deleteNote(...e))},Se)]),(0,a._)("div",Oe,[(0,a._)("div",je,[(0,a._)("h1",null,(0,k.zw)(o.theNote.title),1),""!==o.theNote.category&&null!==o.theNote.category?((0,a.wg)(),(0,a.iD)("div",Te," category: "+(0,k.zw)(o.theNote.category),1)):(0,a.kq)("",!0),(0,a._)("div",Ee,(0,k.zw)(o.theNote.content),1)])])])):(0,a.kq)("",!0)}var We={name:"notePageContainer",props:["note"],setup(e){const t=(0,b.iH)(e.note),n=(0,T.oR)(),o=async()=>{n.dispatch({type:"deleteNote",payload:{id:e.noteId}})};return{theNote:t,deleteNote:o}}};const qe=(0,g.Z)(We,[["render",Ie]]);var ze=qe;function Be(e,t,n,o,r,s){const i=(0,a.up)("actionContainer");return(0,a.wg)(),(0,a.j4)(i,{page:"Edit",type:1,btnOne:"delete",note:o.theNote,onButtonOne:o.deleteNote,onButtonConfirm:o.editHandler},null,8,["note","onButtonOne","onButtonConfirm"])}var Ze={name:"editPage",props:["note"],components:{actionContainer:me},setup(e){const t=(0,b.iH)(e.note),n=(0,T.oR)();let o=!1;const a=async({title:e,category:a,content:r})=>{const s=await n.dispatch({type:"editNote",payload:{title:e,category:a,content:r,id:t.value._id}});!0!==s?console.log(s):(o=!0,n.dispatch({type:"fetchNotes"}),bn.push({path:`/notes/${t.value._id}`}))},r=async()=>{let e=await n.dispatch({type:"deleteNote",payload:{id:t.value._id}});if(!0!==e)console.log(e);else{if(!1===e)return;o=!0,n.dispatch({type:"fetchNotes"}),bn.push({path:"/notes"})}};return(0,fe.iS)(((e,t,n)=>{if(!0!==o){const e=confirm("all changes will not be saved. Are you sure?");e?n():n(!1)}else n()})),{theNote:t,editHandler:a,deleteNote:r}}};const Fe=(0,g.Z)(Ze,[["render",Be],["__scopeId","data-v-8a1176f0"]]);var Le=Fe;const xe={class:"userMainWrap",ref:"forScroll"},Ae={class:"userMain"},Re={key:0,class:"errorContain"},Me=(0,a._)("i",{class:"bi bi-exclamation"},null,-1),$e={key:1,class:"infoContain"},Ve=(0,a._)("i",{class:"bi bi-info-circle-fill"},null,-1),Je={class:"userMainContain"};function Ye(e,t,n,o,r,s){const i=(0,a.up)("userLogin"),l=(0,a.up)("userRegister");return(0,a.wg)(),(0,a.iD)("div",xe,[(0,a._)("div",Ae,[o.error?((0,a.wg)(),(0,a.iD)("div",Re,[Me,(0,a.Uk)(" "+(0,k.zw)(o.error),1)])):o.info?((0,a.wg)(),(0,a.iD)("div",$e,[Ve,(0,a.Uk)(" "+(0,k.zw)(o.info),1)])):(0,a.kq)("",!0),(0,a._)("div",Je,[(0,a.Wm)(i,{onErrorUpdate:o.errorUpdate},null,8,["onErrorUpdate"]),(0,a.Wm)(l,{onErrorUpdate:o.errorUpdate,onInfoUpdate:o.infoUpdate},null,8,["onErrorUpdate","onInfoUpdate"])])])],512)}const Ge={class:"inputField_up"},Ke={class:"controlContainer_up"},Qe=(0,a._)("label",{for:"loginEmail"},"Email:",-1),Xe={class:"controlContainer_up"},et=(0,a._)("label",{for:"loginPassword"},"Password:",-1);function tt(e,t,n,r,s,i){const l=(0,a.up)("userContainer");return(0,a.wg)(),(0,a.j4)(l,{title:"Login",buttonName:"login",onFormSubmit:r.loginUser},{default:(0,a.w5)((()=>[(0,a._)("div",Ge,[(0,a._)("div",Ke,[Qe,(0,a.wy)((0,a._)("input",{id:"loginEmail",type:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e)},null,512),[[o.nr,r.email]])]),(0,a._)("div",Xe,[et,(0,a.wy)((0,a._)("input",{id:"loginPassword",type:"password",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e)},null,512),[[o.nr,r.password]])])])])),_:1},8,["onFormSubmit"])}const nt={class:"userContainer_up"},ot={key:0,class:"imgContainer_up"},at=(0,a._)("img",{class:"img_up",src:"https://images.pexels.com/photos/952670/pexels-photo-952670.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"},null,-1),rt=(0,a._)("span",null,"Welcome",-1),st=[at,rt],it={class:"title_up"},lt={class:"userMainButton_up",type:"submit"};function ct(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("div",nt,["Login"===n.title?((0,a.wg)(),(0,a.iD)("div",ot,st)):(0,a.kq)("",!0),(0,a._)("div",it,(0,k.zw)(n.title),1),(0,a._)("form",{class:"userForm_up",onSubmit:t[0]||(t[0]=(...e)=>o.formSubmit&&o.formSubmit(...e))},[(0,a.WI)(e.$slots,"default"),(0,a._)("button",lt,(0,k.zw)(n.buttonName),1)],32)])}var ut={props:["title","buttonName"],setup(e,t){const n=e=>{e.preventDefault(),t.emit("formSubmit")};return{formSubmit:n}}};const pt=(0,g.Z)(ut,[["render",ct]]);var dt=pt,mt={name:"userLogin",components:{userContainer:dt},setup(e,t){let n=(0,b.iH)(null),o=(0,b.iH)(null);const a=(0,T.oR)(),r=(0,fe.tv)();a.dispatch("getUserData"),a.getters.getUser&&r.push({path:"/notes"});const s=async()=>{let e=await a.dispatch({type:"userLogin",payload:{email:n.value,password:o.value}});!0===e?console.log("login success"):t.emit("errorUpdate",e)};return{email:n,password:o,loginUser:s}}};const ft=(0,g.Z)(mt,[["render",tt]]);var gt=ft;const wt={class:"inputField_up"},ht={class:"controlContainer_up"},vt=(0,a._)("label",{for:"registerName"},"Name:",-1),yt={class:"controlContainer_up"},_t=(0,a._)("label",{for:"registerEmail"},"Email:",-1),bt={class:"controlContainer_up"},kt=(0,a._)("label",{for:"registerPassword"},"Password:",-1),Ct={class:"controlContainer_up"},Nt=(0,a._)("label",{for:"registerConfirm"},"Confirm Password:",-1);function Ut(e,t,n,r,s,i){const l=(0,a.up)("userContainer");return(0,a.wg)(),(0,a.j4)(l,{title:"Sign Up",buttonName:"register",onFormSubmit:r.registerUser},{default:(0,a.w5)((()=>[(0,a._)("div",wt,[(0,a._)("div",ht,[vt,(0,a.wy)((0,a._)("input",{id:"registerName",type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e)},null,512),[[o.nr,r.name]])]),(0,a._)("div",yt,[_t,(0,a.wy)((0,a._)("input",{id:"registerEmail",type:"email",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>r.email=e)},null,512),[[o.nr,r.email]])]),(0,a._)("div",bt,[kt,(0,a.wy)((0,a._)("input",{id:"registerPassword",type:"password",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>r.password=e)},null,512),[[o.nr,r.password]])]),(0,a._)("div",Ct,[Nt,(0,a.wy)((0,a._)("input",{id:"registerConfirm",type:"password",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>r.confirmPwd=e)},null,512),[[o.nr,r.confirmPwd]])])])])),_:1},8,["onFormSubmit"])}var Dt={name:"userRegister",components:{userContainer:dt},setup(e,t){let n=(0,b.iH)(null),o=(0,b.iH)(null),a=(0,b.iH)(null),r=(0,b.iH)(null);const s=async()=>{if(a.value.length<8)return void t.emit("errorUpdate","password length cannot less than 8 letters");if(a.value!==r.value)return void t.emit("errorUpdate","password and comfirm password is not the same");let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.value,email:o.value,password:a.value})};try{let s=await fetch("https://jotes-back-end.herokuapp.com/users",e);s.ok?(t.emit("infoUpdate","account created successfully, please try to login"),n.value="",o.value="",a.value="",r.value=""):t.emit("errorUpdate","an account with the same email already exists, please try again")}catch(s){t.emit("errorUpdate",s)}};return{name:n,email:o,password:a,confirmPwd:r,registerUser:s}}};const Pt=(0,g.Z)(Dt,[["render",Ut]]);var Ht=Pt,St={components:{userLogin:gt,userRegister:Ht},setup(){const e=(0,b.iH)(null);let t=(0,b.iH)(null),n=(0,b.iH)(null);const o=e=>{t.value=e,setTimeout((()=>{r()}),500)},a=e=>{n.value=e,setTimeout((()=>{r()}),500)},r=()=>{e.value.scrollTo({top:0,behavior:"smooth"})};return{error:t,info:n,errorUpdate:o,infoUpdate:a,forScroll:e}}};const Ot=(0,g.Z)(St,[["render",Ye]]);var jt=Ot;const Tt={class:"userProfile",ref:"forScroll"};function Et(e,t,n,o,r,s){const i=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",Tt,[(0,a.Wm)(i,{user:o.user,notes:o.notes,onScrollTop:o.scroll},null,8,["user","notes","onScrollTop"])],512)}const It=(0,a._)("i",{class:"bi bi-pencil-square"},null,-1),Wt=(0,a._)("div",{class:"relativeImgContainer"},[(0,a._)("div",{class:"imgContainer"},[(0,a._)("img",{class:"profileImage",src:"/avatar1.png"}),(0,a._)("i",{class:"bi bi-image-alt"},[(0,a._)("a",{href:"https://www.freepik.com/vectors/teenager",target:"_blank"},"Teenager vector created by studiogstock - www.freepik.com")])])],-1),qt={class:"nameSpan"},zt={key:0};function Bt(e,t,n,o,r,s){const i=(0,a.up)("router-link"),l=(0,a.up)("profileTemplate");return n.user?((0,a.wg)(),(0,a.j4)(l,{key:0,type:"main"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{to:{name:"profileEdit"},class:"editButton"},{default:(0,a.w5)((()=>[It])),_:1}),Wt,(0,a._)("span",qt,(0,k.zw)(n.user.name),1),(0,a._)("span",null,"Email: "+(0,k.zw)(n.user.email),1),n.notes?((0,a.wg)(),(0,a.iD)("span",zt," Total notes: "+(0,k.zw)(n.notes.length),1)):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0)}const Zt=e=>((0,a.dD)("data-v-a4eb245e"),e=e(),(0,a.Cn)(),e),Ft={class:"profileContainer_pp"},Lt={key:0,class:"errorContain"},xt=Zt((()=>(0,a._)("i",{class:"bi bi-exclamation"},null,-1))),At=Zt((()=>(0,a._)("span",{class:"hiSpan"},"hi",-1)));function Rt(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("div",Ft,["edit"===n.type&&n.error?((0,a.wg)(),(0,a.iD)("div",Lt,[xt,(0,a.Uk)(" "+(0,k.zw)(n.error),1)])):(0,a.kq)("",!0),At,(0,a.WI)(e.$slots,"default",{},void 0,!0)])}var Mt={props:["type","error"],setup(){}};const $t=(0,g.Z)(Mt,[["render",Rt],["__scopeId","data-v-a4eb245e"]]);var Vt=$t,Jt={components:{profileTemplate:Vt},props:["user","notes"],setup(){}};const Yt=(0,g.Z)(Jt,[["render",Bt]]);var Gt=Yt,Kt={name:"userProfile",components:{profileMain:Gt},setup(){const e=(0,T.oR)();let t=(0,b.iH)(null);if(e.dispatch("getUserData"),e.dispatch({type:"fetchNotes"}),!e.state.user)return void bn.push({path:"/user"});const n=(0,a.Fl)((()=>e.state.user)),o=(0,a.Fl)((()=>e.state.notes)),r=()=>{setTimeout((()=>{t.value.scrollTo({top:0,behavior:"smooth"})}),500)};return{store:e,user:n,notes:o,forScroll:t,scroll:r}}};const Qt=(0,g.Z)(Kt,[["render",Et],["__scopeId","data-v-4ee62a0b"]]);var Xt=Qt;const en=e=>((0,a.dD)("data-v-4998997f"),e=e(),(0,a.Cn)(),e),tn=en((()=>(0,a._)("div",{class:"relativeImgContainer"},[(0,a._)("div",{class:"imgContainer"},[(0,a._)("img",{class:"profileImage",src:"/avatar1.png"}),(0,a._)("i",{class:"bi bi-image-alt"},[(0,a._)("a",{href:"https://www.freepik.com/vectors/teenager",target:"_blank"},"Teenager vector created by studiogstock - www.freepik.com")])])],-1))),nn=en((()=>(0,a._)("label",{for:"password_pp"},"Password: ",-1))),on=en((()=>(0,a._)("i",{class:"bi bi-shield-lock-fill"},null,-1))),an=(0,a.Uk)(" Change Password "),rn=[on,an],sn={key:0},ln={class:"controlPwd"},cn=en((()=>(0,a._)("label",{class:"labelNewPwd",for:"newPassword"},"New Password: ",-1))),un={class:"controlPwd"},pn=en((()=>(0,a._)("label",{class:"labelNewPwd",for:"confirmNewPassword"},"Confirm New Password: ",-1))),dn={class:"buttonWrap"},mn=en((()=>(0,a._)("i",{class:"bi bi-trash-fill"},null,-1))),fn=(0,a.Uk)("Delete Account "),gn=[mn,fn],wn=en((()=>(0,a._)("button",{class:"doneButton",type:"submit"},[(0,a._)("i",{class:"bi bi-pencil-square"}),(0,a.Uk)(" Done Edit ")],-1)));function hn(e,t,n,r,s,i){const l=(0,a.up)("profileTemplate");return n.user?((0,a.wg)(),(0,a.j4)(l,{key:0,type:"edit",error:r.error},{default:(0,a.w5)((()=>[(0,a._)("form",{onSubmit:t[6]||(t[6]=(0,o.iM)(((...e)=>r.editUser&&r.editUser(...e)),["prevent"]))},[tn,(0,a.wy)((0,a._)("input",{class:"nameSpan","onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),required:""},null,512),[[o.nr,r.name]]),(0,a._)("span",null,"Email: "+(0,k.zw)(n.user.email),1),(0,a._)("div",null,[nn,(0,a.wy)((0,a._)("input",{type:"password",id:"password_pp","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),required:""},null,512),[[o.nr,r.password]])]),(0,a._)("span",{class:"changeButton",onClick:t[2]||(t[2]=(...e)=>r.updateChangePwd&&r.updateChangePwd(...e))},rn),r.changePwd?((0,a.wg)(),(0,a.iD)("div",sn,[(0,a._)("div",ln,[cn,(0,a.wy)((0,a._)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[3]||(t[3]=e=>r.newPassword=e),required:"",class:"inputControl"},null,512),[[o.nr,r.newPassword]])]),(0,a._)("div",un,[pn,(0,a.wy)((0,a._)("input",{type:"password",id:"confirmNewPassword","onUpdate:modelValue":t[4]||(t[4]=e=>r.confirmNewPassword=e),required:"",class:"inputControl"},null,512),[[o.nr,r.confirmNewPassword]])])])):(0,a.kq)("",!0),(0,a._)("div",dn,[(0,a._)("button",{class:"deleteButton",onClick:t[5]||(t[5]=(...e)=>r.deleteUser&&r.deleteUser(...e))},gn),wn])],32)])),_:1},8,["error"])):(0,a.kq)("",!0)}var vn={name:"profileEdit",props:["user","notes"],components:{profileTemplate:Vt},setup(e,t){let n=(0,b.iH)(e.user.name),o=(0,b.iH)(null),a=(0,b.iH)(null),r=(0,b.iH)(null),s=(0,b.iH)(null),i=!1,l=(0,b.iH)(!1);const c=(0,T.oR)(),u=()=>{l.value=!l.value},p=async()=>{let e=await c.dispatch({type:"userEdit",payload:{password:o.value,name:n.value,changePwd:l.value,newPassword:a.value}});!0!==e?m(e):(i=!0,bn.push({path:"/user/profile"}))},d=async()=>{let e=await c.dispatch({type:"userDelete",payload:{password:o.value}});!0!==e?m(e):(i=!0,bn.push({path:"/"}))},m=e=>{s.value=e,t.emit("scrollTop")};return(0,fe.iS)(((e,t,n)=>{if(!0!==i){const e=confirm("all changes will not be saved. Are you sure?");e?n():n(!1)}else n()})),{name:n,password:o,newPassword:a,confirmNewPassword:r,updateChangePwd:u,changePwd:l,editUser:p,deleteUser:d,error:s}}};const yn=(0,g.Z)(vn,[["render",hn],["__scopeId","data-v-4998997f"]]);var _n=yn;const bn=(0,fe.p7)({history:(0,fe.PO)("/Jotes_FE/"),routes:[{path:"/",name:"homePage",component:h},{path:"/user",name:"userMain",component:jt},{path:"/user/profile",name:"userProfile",component:Xt,children:[{path:"",name:"profileMain",component:Gt},{path:"edit",name:"profileEdit",component:_n}]},{path:"/notes",name:"notesPage",component:Q,children:[{path:"create",component:he},{path:":id",name:"notePage",component:be,children:[{path:"",component:ze},{path:":edit",component:Le}]}]},{path:"/:others",redirect:"/",component:h}]}),kn={getUserData(e){let t=JSON.parse(sessionStorage.getItem("userData"));e.commit("saveUser",t)},async userLogin({dispatch:e},{payload:{email:t,password:n}}){let o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})};try{console.log("https://jotes-back-end.herokuapp.com");let t=await fetch("https://jotes-back-end.herokuapp.com/users/login",o),n=await t.json();return t.ok?(sessionStorage.setItem("userData",JSON.stringify(n)),e("getUserData"),bn.push({path:"/notes"}),!0):"invalid email or password"}catch(a){return a.message}},async userLogout({dispatch:e}){sessionStorage.removeItem("userData"),e("getUserData"),bn.push({path:"/"})},async userEdit({dispatch:e,state:t},{payload:n}){const o={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n.password,name:n.name,changePwd:n.changePwd,email:t.user.email,newPassword:n.newPassword})};try{let t=await fetch("https://jotes-back-end.herokuapp.com/users/profile",o),n=await t.json();return t.ok?(sessionStorage.setItem("userData",JSON.stringify(n)),e({type:"getUserData"}),!0):n.message}catch(a){return a}},async userDelete({dispatch:e,state:t},{payload:n}){let o=confirm("Are you sure you want to delete this account?");const a={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.user.email,password:n.password})};if(o)try{let t=await fetch("https://jotes-back-end.herokuapp.com/users/profile",a),n=await t.json();return t.ok?(sessionStorage.removeItem("userData"),e({type:"getUserData"}),!0):n.message}catch(r){return r}}};var Cn=kn;const Nn={async fetchNotes({commit:e,state:t}){const n={method:"GET",headers:{Authorization:`Bearer ${t.user.token}`}},o=await fetch("https://jotes-back-end.herokuapp.com/notes",n).then((e=>e.json()));e("updateNotes",o)},async editNote({state:e},{payload:{title:t,category:n,content:o,id:a}}){const r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.user.token}`},body:JSON.stringify({title:t,category:n,content:o})};try{const e=await fetch(`https://jotes-back-end.herokuapp.com/notes/${a}`,r);return!!e.ok||"note not found"}catch(s){return"error when request for note editing"}},async createNote({state:e,dispatch:t},{payload:{title:n,category:o,content:a}}){const r={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.user.token}`},body:JSON.stringify({title:n,category:o,content:a})};try{const e=await fetch("https://jotes-back-end.herokuapp.com/notes/create",r);return e.ok?(t("fetchNotes"),bn.push({path:"/notes"}),!0):"error when creating new note"}catch(s){return s}},async deleteNote({dispatch:e,state:t},{payload:{id:n}}){let o=confirm("Are you sure?");if(!o)return!1;{const e={method:"DELETE",headers:{Authorization:`Bearer ${t.user.token}`}};try{const t=await fetch(`https://jotes-back-end.herokuapp.com/notes/${n}`,e);return!!t.ok||"error when delete note"}catch(a){return a}}}};var Un=Nn;const Dn=(0,T.MT)({state:{user:null,notes:null},getters:{getUser(e){return e.user},getNotes(e){return e.notes}},mutations:{saveUser(e,t){e.user=t},updateNotes(e,t){e.notes=t}},actions:{...Cn,...Un}});var Pn=Dn;function Hn(e,t,n,o,r,s){const i=(0,a.up)("appsHeader"),l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(i,{title:"Jotes"}),(0,a.Wm)(l)],64)}const Sn={id:"header"},On={class:"titleContainer"};function jn(e,t,n,o,r,s){const i=(0,a.up)("router-link"),l=(0,a.up)("profileComponent");return(0,a.wg)(),(0,a.iD)("div",Sn,[(0,a._)("div",On,[(0,a.Wm)(i,{class:"title",to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(n.title),1)])),_:1})]),(0,a.Wm)(l)])}const Tn={class:"profileWrap",ref:"test"},En={class:"profileContainer"},In={key:0},Wn={class:"profileDetail"},qn=(0,a.Uk)("my notes"),zn={key:1};function Bn(e,t,n,r,s,i){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Tn,[(0,a._)("i",{class:"bi bi-person-circle",onClick:t[0]||(t[0]=(0,o.iM)(((...e)=>r.clickHandler&&r.clickHandler(...e)),["stop"]))}),(0,a.wy)((0,a._)("div",En,[r.store.state.user?((0,a.wg)(),(0,a.iD)("div",In,[(0,a._)("div",{class:"profileDetail",onClick:t[1]||(t[1]=(...e)=>r.profile&&r.profile(...e))},(0,k.zw)(r.store.state.user.name),1),(0,a._)("div",Wn,[(0,a.Wm)(l,{class:"link",to:"/notes"},{default:(0,a.w5)((()=>[qn])),_:1})]),(0,a._)("div",{class:"profileDetail",onClick:t[2]||(t[2]=(...e)=>r.logout&&r.logout(...e))},"logout")])):((0,a.wg)(),(0,a.iD)("div",zn,[(0,a._)("div",{class:"profileDetail",onClick:t[3]||(t[3]=(...e)=>r.login&&r.login(...e))},"login")]))],512),[[o.F8,r.profileShow]])],512)}var Zn={name:"profileComponent",setup(){let e=(0,b.iH)(!1),t=(0,b.iH)(null),n=(0,T.oR)();(0,a.bv)((()=>{document.addEventListener("mousedown",r)}));const o=()=>{e.value=!e.value},r=n=>{t.value.contains(n.target)||(e.value=!1)},s=()=>{bn.push({path:"/user"})},i=()=>{n.dispatch("userLogout")},l=()=>{bn.push({path:"/user/profile"})};return{profileShow:e,clickHandler:o,test:t,store:n,login:s,logout:i,profile:l}}};const Fn=(0,g.Z)(Zn,[["render",Bn],["__scopeId","data-v-f12d7b54"]]);var Ln=Fn,xn={name:"appsHeader",components:{profileComponent:Ln},props:{title:String},setup(){let e=(0,T.oR)();e.dispatch("getUserData")}};const An=(0,g.Z)(xn,[["render",jn],["__scopeId","data-v-4c9f449b"]]);var Rn=An,Mn={name:"App",components:{appsHeader:Rn}};const $n=(0,g.Z)(Mn,[["render",Hn]]);var Vn=$n;(0,o.ri)(Vn).use(bn).use(Pn).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var s=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],r=e[u][2];for(var i=!0,l=0;l<o.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,s=o[0],i=o[1],l=o[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(l)var u=l(n)}for(t&&t(o);c<s.length;c++)r=s[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3258)}));o=n.O(o)})();
//# sourceMappingURL=app.1266abc3.js.map