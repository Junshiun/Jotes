(function(){"use strict";var e={2073:function(e,t,o){var n=o(9242),a=o(3396);const s=e=>((0,a.dD)("data-v-decf29c6"),e=e(),(0,a.Cn)(),e),r={class:"pageWrap_hp"},l={class:"wallpaperWrap_hp"},i=s((()=>(0,a._)("img",{class:"wallpaper_hp",src:"https://images.pexels.com/photos/442574/pexels-photo-442574.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"},null,-1))),c={class:"mainInfo_hp"},u=s((()=>(0,a._)("span",{class:"title"},"Create Your Notes in Jotes",-1))),p=s((()=>(0,a._)("span",null,"Login or Sign Up",-1))),d=(0,a.Uk)("Here");function m(e,t,o,n,s,m){const g=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",l,[i,(0,a._)("div",c,[u,p,(0,a.Wm)(g,{to:{name:"userMain"},class:"linkButton"},{default:(0,a.w5)((()=>[d])),_:1})])])])}var g={name:"homePage"},w=o(89);const h=(0,w.Z)(g,[["render",m],["__scopeId","data-v-decf29c6"]]);var v=h;const f={key:0,class:"mainPage"},_={class:"notesWrapper_main"},y={class:"notes"};function b(e,t,o,n,s,r){const l=(0,a.up)("category-bar"),i=(0,a.up)("noteContainer"),c=(0,a.up)("router-view"),u=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.store.getters.getNotes?((0,a.wg)(),(0,a.iD)("div",f,[(0,a.Wm)(l,{notes:n.store.getters.getNotes,onFilter:n.filteredNotes},null,8,["notes","onFilter"]),(0,a._)("div",_,[(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.showingNotes,(e=>((0,a.wg)(),(0,a.j4)(i,{key:e,note:e,onFilter:n.filteredNotes},null,8,["note","onFilter"])))),128))]),((0,a.wg)(),(0,a.j4)(c,{key:e.$route.fullPath,class:"partWrapper"}))])])):(0,a.kq)("",!0),(0,a.Wm)(u,{show:n.loadShow},null,8,["show"])],64)}var k=o(4870),C=o(7139);const N={class:"noteWrapper"},P={class:"topWrapper"},D={class:"date"},U={class:"title"},S={class:"content"};function H(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("div",P,[(0,a._)("span",D,(0,C.zw)(n.date),1)]),(0,a._)("div",{class:"bottomWrapper",onClick:t[1]||(t[1]=(...e)=>n.noteNavigate&&n.noteNavigate(...e))},[(0,a._)("h1",U,(0,C.zw)(o.note.title),1),""!==o.note.category&&null!==o.note.category?((0,a.wg)(),(0,a.iD)("span",{key:0,class:"category",onClick:t[0]||(t[0]=e=>n.filter(o.note.category))},(0,C.zw)(o.note.category),1)):(0,a.kq)("",!0),(0,a._)("p",S,(0,C.zw)(o.note.content),1)])])}const W={class:"optionMain",ref:"option"},O={class:"options"};function j(e,t,o,s,r,l){return(0,a.wg)(),(0,a.iD)("div",W,[(0,a._)("i",{class:"bi bi-three-dots",onClick:t[0]||(t[0]=(...e)=>s.clickHandler&&s.clickHandler(...e))}),(0,a.wy)((0,a._)("div",O,[(0,a._)("span",{onClick:t[1]||(t[1]=(...e)=>s.editNote&&s.editNote(...e))},"edit"),(0,a._)("span",{onClick:t[2]||(t[2]=(...e)=>s.deleteNote&&s.deleteNote(...e))},"delete")],512),[[n.F8,s.showOptions]])],512)}var B=o(65),E={name:"noteOptions",props:["noteId"],setup(e){let t=(0,k.iH)(!1),o=(0,k.iH)(null);const n=(0,B.oR)();(0,a.bv)((()=>{document.addEventListener("mousedown",r)})),(0,a.Ah)((()=>{document.removeEventListener("mousedown",r)}));const s=()=>{t.value=!t.value},r=e=>{o.value.contains(e.target)||(t.value=!1)},l=()=>{qo.push({path:`/notes/${e.noteId}/edit`})},i=async()=>{n.dispatch({type:"deleteNote",payload:{id:e.noteId}})};return{showOptions:t,clickHandler:s,option:o,deleteNote:i,editNote:l}}};const I=(0,w.Z)(E,[["render",j],["__scopeId","data-v-1e482718"]]);var T=I,q={name:"noteContainer",props:["note"],components:{noteOptions:T},setup(e,t){const o=e=>{t.emit("filter",e)},n=new Date(e.note.updatedAt).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"}),a=()=>{qo.push({path:`/notes/${e.note._id}`})};return{filter:o,date:n,noteNavigate:a}}};const L=(0,w.Z)(q,[["render",H],["__scopeId","data-v-7da1c437"]]);var z=L;const R=e=>((0,a.dD)("data-v-7fcc2086"),e=e(),(0,a.Cn)(),e),F={class:"categoryBar"},Z={class:"createWrap"},A=R((()=>(0,a._)("i",{class:"bi bi-plus-circle-dotted"},null,-1))),x=(0,a.Uk)(" note"),M={key:0,class:"categoriesWrap"},$=["onClick"];function V(e,t,o,n,s,r){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("div",Z,[(0,a.Wm)(l,{class:"create",to:"/notes/create"},{default:(0,a.w5)((()=>[A,x])),_:1})]),n.categories?((0,a.wg)(),(0,a.iD)("div",M,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.categories,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"categoryContainer",key:e,onClick:t=>n.onClick(t,e),ref_for:!0,ref:"categoryRef"},(0,C.zw)(e),9,$)))),128))])):(0,a.kq)("",!0)])}var J={name:"categoryBar",props:["notes"],setup(e,t){let o=(0,k.iH)(null),n=(0,k.iH)(null),s=(0,k.iH)(null);o=(0,a.Fl)((()=>{let t=["All"];return e.notes.map((e=>{t.includes(e.category)||""===e.category||null===e.category||t.push(e.category)})),t}));const r=(e,o)=>{for(let t=0;t<s.value.length;t++)s.value[t].classList.remove("selected");e.target.classList.toggle("selected"),n.value=o,t.emit("filter",o),qo.push({path:"/notes"})};return(0,a.bv)((()=>{s.value[0].classList.add("selected")})),{categoryRef:s,categories:o,onClick:r,selected:n}}};const Y=(0,w.Z)(J,[["render",V],["__scopeId","data-v-7fcc2086"]]);var G=Y;const K=e=>((0,a.dD)("data-v-2797ffdf"),e=e(),(0,a.Cn)(),e),Q={key:0,class:"loadingPage"},X=K((()=>(0,a._)("div",{class:"loadingWrap"},[(0,a._)("div",null,"Loading"),(0,a._)("div",{class:"loadingBar"})],-1))),ee=[X];function te(e,t,o,n,s,r){return o.show?((0,a.wg)(),(0,a.iD)("div",Q,ee)):(0,a.kq)("",!0)}var oe={props:["show"],setup(){}};const ne=(0,w.Z)(oe,[["render",te],["__scopeId","data-v-2797ffdf"]]);var ae=ne,se={name:"notesPage",components:{noteContainer:z,categoryBar:G,loadingPage:ae},setup(){let e,t=(0,k.iH)(null),o=(0,k.iH)(null),n=(0,k.iH)(!1);const s=(0,B.oR)();(async()=>{await s.dispatch("getUserData"),s.state.user||qo.push({path:"/user"})})(),(async()=>{n.value=!0,await s.dispatch("fetchNotes"),n.value=!1})(),t=(0,a.Fl)((()=>""===o.value||null===o.value||"All"===o.value?(e=s.state.notes,[...e].reverse()):(e=s.state.notes.filter((e=>e.category===o.value)),[...e].reverse())));let r=e=>{o.value=e};return{showingNotes:t,filteredNotes:r,store:s,loadShow:n}}};const re=(0,w.Z)(se,[["render",b],["__scopeId","data-v-48f7faa6"]]);var le=re;function ie(e,t,o,n,s,r){const l=(0,a.up)("actionContainer"),i=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{page:"Create",type:2,btnOne:"discard",onButtonConfirm:n.createNote,onButtonOne:n.discard},null,8,["onButtonConfirm","onButtonOne"]),(0,a.Wm)(i,{show:n.loadShow},null,8,["show"])],64)}const ce=e=>((0,a.dD)("data-v-3fd25344"),e=e(),(0,a.Cn)(),e),ue={key:0,class:"partWrapper_np"},pe={class:"noteOptions_np"},de={key:0,class:"bi bi-trash-fill"},me={key:1,class:"bi bi-x-circle"},ge={class:"noteWrapper_np"},we={class:"category_np"},he=(0,a.Uk)(" category: "),ve={class:"content_np"},fe=ce((()=>(0,a._)("button",{type:"submit"},"confirm",-1)));function _e(e,t,o,s,r,l){return s.theNote||2===o.type?((0,a.wg)(),(0,a.iD)("div",ue,[(0,a._)("div",pe,[(0,a._)("h1",null,(0,C.zw)(o.page),1),(0,a._)("button",{class:"deleteButton",onClick:t[0]||(t[0]=(...e)=>s.buttonOne&&s.buttonOne(...e))},[1===o.type?((0,a.wg)(),(0,a.iD)("i",de)):((0,a.wg)(),(0,a.iD)("i",me)),(0,a.Uk)((0,C.zw)(o.btnOne),1)])]),(0,a._)("div",ge,[s.theNote||2===o.type?((0,a.wg)(),(0,a.iD)("form",{key:0,class:"noteContainer_np",onSubmit:t[4]||(t[4]=(0,n.iM)(((...e)=>s.buttonConfirm&&s.buttonConfirm(...e)),["prevent"]))},[(0,a._)("h1",null,[(0,a.wy)((0,a._)("input",{class:"inputTitle_np","onUpdate:modelValue":t[1]||(t[1]=e=>s.title=e),type:"text",required:""},null,512),[[n.nr,s.title]])]),(0,a._)("div",we,[he,(0,a.wy)((0,a._)("input",{class:"inputCategory_np","onUpdate:modelValue":t[2]||(t[2]=e=>s.category=e),type:"text"},null,512),[[n.nr,s.category]])]),(0,a._)("div",ve,[(0,a.wy)((0,a._)("textarea",{class:"inputContent_np","onUpdate:modelValue":t[3]||(t[3]=e=>s.content=e)},null,512),[[n.nr,s.content]])]),fe],32)):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)}var ye={name:"actionContainer",props:["note","btnOne","type","page"],setup(e,t){const o=(0,k.iH)(e.note);let n=(0,k.iH)(null),a=(0,k.iH)(null),s=(0,k.iH)(null);e.note&&(n.value=o.value.title,a.value=o.value.category,s.value=o.value.content);const r=async()=>{t.emit("buttonConfirm",{title:n.value,category:a.value,content:s.value})},l=async()=>{t.emit("buttonOne")};return{theNote:o,title:n,category:a,content:s,buttonConfirm:r,buttonOne:l}}};const be=(0,w.Z)(ye,[["render",_e],["__scopeId","data-v-3fd25344"]]);var ke=be,Ce=o(678),Ne={name:"createPage",components:{actionContainer:ke,loadingPage:ae},setup(){let e=!1,t=(0,k.iH)(!1);const o=(0,B.oR)(),n=async({title:n,category:a,content:s})=>{e=!0,t.value=!0,await o.dispatch({type:"createNote",payload:{title:n,category:a,content:s}}),t.value=!1},a=()=>{qo.push({path:"/notes"})};return(0,Ce.iS)(((t,o,n)=>{if(!0!==e){const e=confirm("all changes will not be saved. Are you sure?");e?n():n(!1)}else n()})),{createNote:n,discard:a,loadShow:t}}};const Pe=(0,w.Z)(Ne,[["render",ie],["__scopeId","data-v-8e001138"]]);var De=Pe;const Ue={key:1,class:"loadWrap_np"},Se=(0,a._)("div",{class:"load_np"},"loading",-1),He=(0,a._)("div",{class:"loadBar_np"},null,-1),We=[Se,He];function Oe(e,t,o,n,s,r){const l=(0,a.up)("router-view");return n.note?((0,a.wg)(),(0,a.j4)(l,{key:0,note:n.note},null,8,["note"])):((0,a.wg)(),(0,a.iD)("div",Ue,We))}var je={name:"notePage",setup(){const e=(0,Ce.yj)(),t=(0,B.oR)();let o=e.params.id;const n=(0,k.iH)(null);return(async()=>{const e={method:"GET",headers:{Authorization:`Bearer ${t.state.user.token}`}},a=await fetch(`https://jotes-back-end.herokuapp.com/notes/${o}`,e);a.ok?n.value=await a.json():qo.push({path:"/notes"})})(),{note:n}}};const Be=(0,w.Z)(je,[["render",Oe]]);var Ee=Be;const Ie={key:0,class:"partWrapper_np"},Te={class:"noteOptions_np"},qe=(0,a._)("h1",null,null,-1),Le=(0,a._)("i",{class:"bi bi-pencil-square"},null,-1),ze=(0,a.Uk)("edit"),Re=(0,a._)("i",{class:"bi bi-trash-fill"},null,-1),Fe=(0,a.Uk)("delete "),Ze=[Re,Fe],Ae={class:"noteWrapper_np"},xe={class:"noteContainer_np"},Me={key:0,class:"category_np"},$e={class:"content_np"};function Ve(e,t,o,n,s,r){const l=(0,a.up)("router-link"),i=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.theNote?((0,a.wg)(),(0,a.iD)("div",Ie,[(0,a._)("div",Te,[qe,(0,a.Wm)(l,{class:"editButton_np",to:{path:"/notes/"+o.note._id+"/edit"}},{default:(0,a.w5)((()=>[Le,ze])),_:1},8,["to"]),(0,a._)("button",{class:"deleteButton",onClick:t[0]||(t[0]=(...e)=>n.deleteNote&&n.deleteNote(...e))},Ze)]),(0,a._)("div",Ae,[(0,a._)("div",xe,[(0,a._)("h1",null,(0,C.zw)(n.theNote.title),1),""!==n.theNote.category&&null!==n.theNote.category?((0,a.wg)(),(0,a.iD)("div",Me," category: "+(0,C.zw)(n.theNote.category),1)):(0,a.kq)("",!0),(0,a._)("div",$e,(0,C.zw)(n.theNote.content),1)])])])):(0,a.kq)("",!0),(0,a.Wm)(i,{show:n.loadShow},null,8,["show"])],64)}var Je={name:"notePageContainer",props:["note"],components:{loadingPage:ae},setup(e){const t=(0,k.iH)(e.note);let o=(0,k.iH)(!1);const n=(0,B.oR)(),a=async()=>{o.value=!0;let e=await n.dispatch({type:"deleteNote",payload:{id:t.value._id}});!0===e&&qo.push({path:"/notes"}),o.value=!1};return{theNote:t,deleteNote:a,loadShow:o}}};const Ye=(0,w.Z)(Je,[["render",Ve]]);var Ge=Ye;function Ke(e,t,o,n,s,r){const l=(0,a.up)("actionContainer"),i=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{page:"Edit",type:1,btnOne:"delete",note:n.theNote,onButtonOne:n.deleteNote,onButtonConfirm:n.editHandler},null,8,["note","onButtonOne","onButtonConfirm"]),(0,a.Wm)(i,{show:n.loadShow},null,8,["show"])],64)}var Qe={name:"editPage",props:["note"],components:{actionContainer:ke,loadingPage:ae},setup(e){const t=(0,k.iH)(e.note),o=(0,B.oR)();let n=(0,k.iH)(!1),a=!1;const s=async({title:e,category:s,content:r})=>{n.value=!0;const l=await o.dispatch({type:"editNote",payload:{title:e,category:s,content:r,id:t.value._id}});!0!==l?console.log(l):(a=!0,o.dispatch({type:"fetchNotes"}),qo.push({path:`/notes/${t.value._id}`})),n.value=!1},r=async()=>{n.value=!0;let e=await o.dispatch({type:"deleteNote",payload:{id:t.value._id}});!0!==e?console.log(e):!0===e&&(a=!0,o.dispatch({type:"fetchNotes"}),qo.push({path:"/notes"})),n.value=!1};return(0,Ce.iS)(((e,t,o)=>{if(!0!==a){const e=confirm("all changes will not be saved. Are you sure?");e?o():o(!1)}else o()})),{theNote:t,editHandler:s,deleteNote:r,loadShow:n}}};const Xe=(0,w.Z)(Qe,[["render",Ke],["__scopeId","data-v-e2ae9eb6"]]);var et=Xe;const tt={class:"mobileSelection_um"},ot={class:"userMainWrap",ref:"forScroll"},nt={class:"userMain"},at={key:0,class:"errorContain"},st=(0,a._)("i",{class:"bi bi-exclamation"},null,-1),rt={key:1,class:"infoContain"},lt=(0,a._)("i",{class:"bi bi-info-circle-fill"},null,-1),it={class:"userMainContain"};function ct(e,t,o,n,s,r){const l=(0,a.up)("userLogin"),i=(0,a.up)("userRegister");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",tt,[(0,a._)("div",{class:"selectionWrap_um",onClick:t[0]||(t[0]=e=>n.selectUpdate(e))},[(0,a._)("span",{class:(0,C.C_)({select_um:!0,selected:"login"===n.mobileSelect}),value:"login",id:"userLoginButton"},"Login",2),(0,a._)("span",{class:(0,C.C_)({select_um:!0,selected:"register"===n.mobileSelect}),value:"register",id:"userRegisterButton"},"Register",2)])]),(0,a._)("div",ot,[(0,a._)("div",nt,[n.error?((0,a.wg)(),(0,a.iD)("div",at,[st,(0,a.Uk)(" "+(0,C.zw)(n.error),1)])):n.info?((0,a.wg)(),(0,a.iD)("div",rt,[lt,(0,a.Uk)(" "+(0,C.zw)(n.info),1)])):(0,a.kq)("",!0),(0,a._)("div",it,[(0,a.Wm)(l,{onErrorUpdate:n.errorUpdate,selected:n.mobileSelect},null,8,["onErrorUpdate","selected"]),(0,a.Wm)(i,{onErrorUpdate:n.errorUpdate,onInfoUpdate:n.infoUpdate,selected:n.mobileSelect},null,8,["onErrorUpdate","onInfoUpdate","selected"])])])],512)],64)}const ut={class:"inputField_up"},pt={class:"controlContainer_up"},dt=(0,a._)("label",{for:"loginEmail"},"Email:",-1),mt={class:"controlContainer_up"},gt=(0,a._)("label",{for:"loginPassword"},"Password:",-1);function wt(e,t,o,s,r,l){const i=(0,a.up)("userContainer"),c=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(i,{title:"Login",buttonName:"login",onFormSubmit:s.loginUser,id:"userLoginForm",class:(0,C.C_)({action:"login"===o.selected})},{default:(0,a.w5)((()=>[(0,a._)("div",ut,[(0,a._)("div",pt,[dt,(0,a.wy)((0,a._)("input",{id:"loginEmail",type:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>s.email=e)},null,512),[[n.nr,s.email]])]),(0,a._)("div",mt,[gt,(0,a.wy)((0,a._)("input",{id:"loginPassword",type:"password",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e)},null,512),[[n.nr,s.password]])])])])),_:1},8,["onFormSubmit","class"]),(0,a.Wm)(c,{show:s.loadShow},null,8,["show"])],64)}const ht={class:"userContainer_up"},vt={key:0,class:"imgContainer_up"},ft=(0,a._)("img",{class:"img_up",src:"https://images.pexels.com/photos/952670/pexels-photo-952670.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"},null,-1),_t=(0,a._)("span",null,"Welcome",-1),yt=[ft,_t],bt={class:"title_up"},kt={class:"userMainButton_up",type:"submit"};function Ct(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",ht,["Login"===o.title?((0,a.wg)(),(0,a.iD)("div",vt,yt)):(0,a.kq)("",!0),(0,a._)("div",bt,(0,C.zw)(o.title),1),(0,a._)("form",{class:"userForm_up",onSubmit:t[0]||(t[0]=(...e)=>n.formSubmit&&n.formSubmit(...e))},[(0,a.WI)(e.$slots,"default"),(0,a._)("button",kt,(0,C.zw)(o.buttonName),1)],32)])}var Nt={props:["title","buttonName"],setup(e,t){const o=e=>{e.preventDefault(),t.emit("formSubmit")};return{formSubmit:o}}};const Pt=(0,w.Z)(Nt,[["render",Ct]]);var Dt=Pt,Ut={name:"userLogin",props:["selected"],components:{userContainer:Dt,loadingPage:ae},setup(e,t){let o=(0,k.iH)(null),n=(0,k.iH)(null),a=(0,k.iH)(!1);const s=(0,B.oR)(),r=(0,Ce.tv)();s.dispatch("getUserData"),s.getters.getUser&&r.push({path:"/notes"});const l=async()=>{a.value=!0;let e=await s.dispatch({type:"userLogin",payload:{email:o.value,password:n.value}});!0===e?console.log("login success"):t.emit("errorUpdate",e),a.value=!1};return{email:o,password:n,loginUser:l,loadShow:a}}};const St=(0,w.Z)(Ut,[["render",wt]]);var Ht=St;const Wt={class:"inputField_up"},Ot={class:"controlContainer_up"},jt=(0,a._)("label",{for:"registerName"},"Name:",-1),Bt={class:"controlContainer_up"},Et=(0,a._)("label",{for:"registerEmail"},"Email:",-1),It={class:"controlContainer_up"},Tt=(0,a._)("label",{for:"registerPassword"},"Password:",-1),qt={class:"controlContainer_up"},Lt=(0,a._)("label",{for:"registerConfirm"},"Confirm Password:",-1);function zt(e,t,o,s,r,l){const i=(0,a.up)("userContainer"),c=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(i,{title:"Sign Up",buttonName:"register",onFormSubmit:s.registerUser,id:"userRegisterForm",class:(0,C.C_)({action:"register"===o.selected})},{default:(0,a.w5)((()=>[(0,a._)("div",Wt,[(0,a._)("div",Ot,[jt,(0,a.wy)((0,a._)("input",{id:"registerName",type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e)},null,512),[[n.nr,s.name]])]),(0,a._)("div",Bt,[Et,(0,a.wy)((0,a._)("input",{id:"registerEmail",type:"email",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>s.email=e)},null,512),[[n.nr,s.email]])]),(0,a._)("div",It,[Tt,(0,a.wy)((0,a._)("input",{id:"registerPassword",type:"password",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>s.password=e)},null,512),[[n.nr,s.password]])]),(0,a._)("div",qt,[Lt,(0,a.wy)((0,a._)("input",{id:"registerConfirm",type:"password",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>s.confirmPwd=e)},null,512),[[n.nr,s.confirmPwd]])])])])),_:1},8,["onFormSubmit","class"]),(0,a.Wm)(c,{show:s.loadShow},null,8,["show"])],64)}var Rt={name:"userRegister",props:["selected"],components:{userContainer:Dt,loadingPage:ae},setup(e,t){let o=(0,k.iH)(null),n=(0,k.iH)(null),a=(0,k.iH)(null),s=(0,k.iH)(null),r=(0,k.iH)(!1);const l=(0,B.oR)(),i=async()=>{if(a.value.length<8)return void t.emit("errorUpdate","password length cannot less than 8 letters");if(a.value!==s.value)return void t.emit("errorUpdate","password and comfirm password is not the same");r.value=!0;let e=await l.dispatch({type:"userRegister",payload:{name:o.value,email:n.value,password:a.value}});!1===e?t.emit("errorUpdate","an account with the same email already exists, please try again"):!0===e?(t.emit("infoUpdate","account created successfully, please try to login"),o.value="",n.value="",a.value="",s.value="",console.log("here"),document.getElementById("userRegisterButton").classList.remove("selected"),document.getElementById("userLoginButton").classList.add("selected"),document.getElementById("userRegisterForm").classList.remove("action"),document.getElementById("userLoginForm").classList.add("action")):t.emit("errorUpdate",e),r.value=!1};return{name:o,email:n,password:a,confirmPwd:s,registerUser:i,loadShow:r}}};const Ft=(0,w.Z)(Rt,[["render",zt]]);var Zt=Ft,At={components:{userLogin:Ht,userRegister:Zt},setup(){const e=(0,k.iH)(null);let t=(0,k.iH)(null),o=(0,k.iH)(null),n=(0,k.iH)("login");const a=e=>{t.value=e,setTimeout((()=>{l()}),500)},s=e=>{o.value=e,setTimeout((()=>{l()}),500)},r=e=>{const t=e.currentTarget.children,o=e.target.getAttribute("value");if(o!==n.value){n.value=o;for(let e=0;e<t.length;e++)t[e].classList.toggle("selected")}},l=()=>{e.value.scrollTo({top:0,behavior:"smooth"})};return{error:t,info:o,errorUpdate:a,infoUpdate:s,forScroll:e,selectUpdate:r,mobileSelect:n}}};const xt=(0,w.Z)(At,[["render",ct]]);var Mt=xt;const $t={class:"userProfile",ref:"forScroll"};function Vt(e,t,o,n,s,r){const l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",$t,[(0,a.Wm)(l,{user:n.user,notes:n.notes,onScrollTop:n.scroll},null,8,["user","notes","onScrollTop"])],512)}const Jt=(0,a._)("i",{class:"bi bi-pencil-square"},null,-1),Yt=(0,a._)("div",{class:"relativeImgContainer"},[(0,a._)("div",{class:"imgContainer"},[(0,a._)("img",{class:"profileImage",src:"/avatar1.png"}),(0,a._)("i",{class:"bi bi-image-alt"},[(0,a._)("a",{href:"https://www.freepik.com/vectors/teenager",target:"_blank"},"Teenager vector created by studiogstock - www.freepik.com")])])],-1),Gt={class:"nameSpan"},Kt={key:0};function Qt(e,t,o,n,s,r){const l=(0,a.up)("router-link"),i=(0,a.up)("profileTemplate");return o.user?((0,a.wg)(),(0,a.j4)(i,{key:0,type:"main"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{to:{name:"profileEdit"},class:"editButton"},{default:(0,a.w5)((()=>[Jt])),_:1}),Yt,(0,a._)("span",Gt,(0,C.zw)(o.user.name),1),(0,a._)("span",null,"Email: "+(0,C.zw)(o.user.email),1),o.notes?((0,a.wg)(),(0,a.iD)("span",Kt," Total notes: "+(0,C.zw)(o.notes.length),1)):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0)}const Xt=e=>((0,a.dD)("data-v-a4eb245e"),e=e(),(0,a.Cn)(),e),eo={class:"profileContainer_pp"},to={key:0,class:"errorContain"},oo=Xt((()=>(0,a._)("i",{class:"bi bi-exclamation"},null,-1))),no=Xt((()=>(0,a._)("span",{class:"hiSpan"},"hi",-1)));function ao(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",eo,["edit"===o.type&&o.error?((0,a.wg)(),(0,a.iD)("div",to,[oo,(0,a.Uk)(" "+(0,C.zw)(o.error),1)])):(0,a.kq)("",!0),no,(0,a.WI)(e.$slots,"default",{},void 0,!0)])}var so={props:["type","error"],setup(){}};const ro=(0,w.Z)(so,[["render",ao],["__scopeId","data-v-a4eb245e"]]);var lo=ro,io={components:{profileTemplate:lo},props:["user","notes"],setup(){}};const co=(0,w.Z)(io,[["render",Qt]]);var uo=co,po={name:"userProfile",components:{profileMain:uo},setup(){const e=(0,B.oR)();let t=(0,k.iH)(null);if(e.dispatch("getUserData"),e.dispatch({type:"fetchNotes"}),!e.state.user)return void qo.push({path:"/user"});const o=(0,a.Fl)((()=>e.state.user)),n=(0,a.Fl)((()=>e.state.notes)),s=()=>{setTimeout((()=>{t.value.scrollTo({top:0,behavior:"smooth"})}),500)};return{store:e,user:o,notes:n,forScroll:t,scroll:s}}};const mo=(0,w.Z)(po,[["render",Vt],["__scopeId","data-v-4ee62a0b"]]);var go=mo;const wo=e=>((0,a.dD)("data-v-1fbca9f3"),e=e(),(0,a.Cn)(),e),ho=wo((()=>(0,a._)("div",{class:"relativeImgContainer"},[(0,a._)("div",{class:"imgContainer"},[(0,a._)("img",{class:"profileImage",src:"/avatar1.png"}),(0,a._)("i",{class:"bi bi-image-alt"},[(0,a._)("a",{href:"https://www.freepik.com/vectors/teenager",target:"_blank"},"Teenager vector created by studiogstock - www.freepik.com")])])],-1))),vo=wo((()=>(0,a._)("label",{for:"password_pp"},"Password: ",-1))),fo=wo((()=>(0,a._)("i",{class:"bi bi-shield-lock-fill"},null,-1))),_o=(0,a.Uk)(" Change Password "),yo=[fo,_o],bo={key:0},ko={class:"controlPwd"},Co=wo((()=>(0,a._)("label",{class:"labelNewPwd",for:"newPassword"},"New Password: ",-1))),No={class:"controlPwd"},Po=wo((()=>(0,a._)("label",{class:"labelNewPwd",for:"confirmNewPassword"},"Confirm New Password: ",-1))),Do={class:"buttonWrap"},Uo=wo((()=>(0,a._)("i",{class:"bi bi-trash-fill"},null,-1))),So=(0,a.Uk)("Delete Account "),Ho=[Uo,So],Wo=wo((()=>(0,a._)("i",{class:"bi bi-pencil-square"},null,-1))),Oo=(0,a.Uk)(" Done Edit "),jo=[Wo,Oo];function Bo(e,t,o,s,r,l){const i=(0,a.up)("profileTemplate"),c=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[o.user?((0,a.wg)(),(0,a.j4)(i,{key:0,type:"edit",error:s.error},{default:(0,a.w5)((()=>[(0,a._)("form",{onSubmit:t[7]||(t[7]=(0,n.iM)((()=>{}),["prevent"]))},[ho,(0,a.wy)((0,a._)("input",{class:"nameSpan","onUpdate:modelValue":t[0]||(t[0]=e=>s.name=e),required:""},null,512),[[n.nr,s.name]]),(0,a._)("span",null,"Email: "+(0,C.zw)(o.user.email),1),(0,a._)("div",null,[vo,(0,a.wy)((0,a._)("input",{type:"password",id:"password_pp","onUpdate:modelValue":t[1]||(t[1]=e=>s.password=e),required:""},null,512),[[n.nr,s.password]])]),(0,a._)("span",{class:"changeButton",onClick:t[2]||(t[2]=(...e)=>s.updateChangePwd&&s.updateChangePwd(...e))},yo),s.changePwd?((0,a.wg)(),(0,a.iD)("div",bo,[(0,a._)("div",ko,[Co,(0,a.wy)((0,a._)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[3]||(t[3]=e=>s.newPassword=e),required:"",class:"inputControl"},null,512),[[n.nr,s.newPassword]])]),(0,a._)("div",No,[Po,(0,a.wy)((0,a._)("input",{type:"password",id:"confirmNewPassword","onUpdate:modelValue":t[4]||(t[4]=e=>s.confirmNewPassword=e),required:"",class:"inputControl"},null,512),[[n.nr,s.confirmNewPassword]])])])):(0,a.kq)("",!0),(0,a._)("div",Do,[(0,a._)("button",{class:"deleteButton",type:"submit",onClick:t[5]||(t[5]=(...e)=>s.deleteUser&&s.deleteUser(...e))},Ho),(0,a._)("button",{class:"doneButton",type:"submit",onClick:t[6]||(t[6]=(...e)=>s.editUser&&s.editUser(...e))},jo)])],32)])),_:1},8,["error"])):(0,a.kq)("",!0),(0,a.Wm)(c,{show:s.loadShow},null,8,["show"])],64)}var Eo={name:"profileEdit",props:["user","notes"],components:{profileTemplate:lo,loadingPage:ae},setup(e,t){let o=(0,k.iH)(e.user.name),n=(0,k.iH)(null),a=(0,k.iH)(null),s=(0,k.iH)(null),r=(0,k.iH)(null),l=!1,i=(0,k.iH)(!1),c=(0,k.iH)(!1);const u=(0,B.oR)(),p=()=>{i.value=!i.value},d=async e=>{c.value=!0;let t=await u.dispatch({type:"userEdit",payload:{password:n.value,name:o.value,changePwd:i.value,newPassword:a.value}});!0!==t?g(t):(l=!0,qo.push({path:"/user/profile"})),c.value=!1},m=async e=>{c.value=!0;let t=await u.dispatch({type:"userDelete",payload:{password:n.value}});!0!==t?g(t):(l=!0,console.log("delete success"),qo.push({path:"/"})),c.value=!1},g=e=>{r.value=e,t.emit("scrollTop")};return(0,Ce.iS)(((e,t,o)=>{if(!0!==l){const e=confirm("all changes will not be saved. Are you sure?");e?o():o(!1)}else o()})),{name:o,password:n,newPassword:a,confirmNewPassword:s,updateChangePwd:p,changePwd:i,editUser:d,deleteUser:m,error:r,loadShow:c}}};const Io=(0,w.Z)(Eo,[["render",Bo],["__scopeId","data-v-1fbca9f3"]]);var To=Io;const qo=(0,Ce.p7)({history:(0,Ce.PO)("/Jotes/"),routes:[{path:"/",name:"homePage",component:v},{path:"/user",name:"userMain",component:Mt},{path:"/user/profile",name:"userProfile",component:go,children:[{path:"",name:"profileMain",component:uo},{path:"edit",name:"profileEdit",component:To}]},{path:"/notes",name:"notesPage",component:le,children:[{path:"create",component:De},{path:":id",name:"notePage",component:Ee,children:[{path:"",component:Ge},{path:":edit",component:et}]}]},{path:"/:others",redirect:"/",component:v}]}),Lo={getUserData(e){let t=JSON.parse(sessionStorage.getItem("userData"));e.commit("saveUser",t)},async userRegister({dispatch:e},{payload:t}){let o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,password:t.password})};try{let e=await fetch("https://jotes-back-end.herokuapp.com/users",o);return!!e.ok}catch(n){return n}},async userLogin({dispatch:e},{payload:{email:t,password:o}}){let n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:o})};try{console.log("https://jotes-back-end.herokuapp.com");let t=await fetch("https://jotes-back-end.herokuapp.com/users/login",n),o=await t.json();return t.ok?(sessionStorage.setItem("userData",JSON.stringify(o)),e("getUserData"),qo.push({path:"/notes"}),!0):"invalid email or password"}catch(a){return a.message}},async userLogout({dispatch:e}){sessionStorage.removeItem("userData"),e("getUserData"),qo.push({path:"/"})},async userEdit({dispatch:e,state:t},{payload:o}){const n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:o.password,name:o.name,changePwd:o.changePwd,email:t.user.email,newPassword:o.newPassword})};try{let t=await fetch("https://jotes-back-end.herokuapp.com/users/profile",n),o=await t.json();return t.ok?(sessionStorage.setItem("userData",JSON.stringify(o)),e({type:"getUserData"}),!0):o.message}catch(a){return a}},async userDelete({dispatch:e,state:t},{payload:o}){let n=confirm("Are you sure you want to delete this account?");const a={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.user.email,password:o.password})};if(n)try{let t=await fetch("https://jotes-back-end.herokuapp.com/users/profile",a),o=await t.json();return t.ok?(sessionStorage.removeItem("userData"),console.log("dispatch success"),e({type:"getUserData"}),!0):o.message}catch(s){return s}}};var zo=Lo;const Ro={async fetchNotes({commit:e,state:t}){const o={method:"GET",headers:{Authorization:`Bearer ${t.user.token}`}},n=await fetch("https://jotes-back-end.herokuapp.com/notes",o).then((e=>e.json()));e("updateNotes",n)},async editNote({state:e},{payload:{title:t,category:o,content:n,id:a}}){const s={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.user.token}`},body:JSON.stringify({title:t,category:o,content:n})};try{const e=await fetch(`https://jotes-back-end.herokuapp.com/notes/${a}`,s);return!!e.ok||"note not found"}catch(r){return"error when request for note editing"}},async createNote({state:e,dispatch:t},{payload:{title:o,category:n,content:a}}){const s={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.user.token}`},body:JSON.stringify({title:o,category:n,content:a})};try{const e=await fetch("https://jotes-back-end.herokuapp.com/notes/create",s);return e.ok?(t("fetchNotes"),qo.push({path:"/notes"}),!0):"error when creating new note"}catch(r){return r}},async deleteNote({dispatch:e,state:t},{payload:{id:o}}){let n=confirm("Are you sure?");if(!n)return!1;{const n={method:"DELETE",headers:{Authorization:`Bearer ${t.user.token}`}};try{const t=await fetch(`https://jotes-back-end.herokuapp.com/notes/${o}`,n);return t.ok?(e("fetchNotes"),!0):"error when delete note"}catch(a){return a}}}};var Fo=Ro;const Zo=(0,B.MT)({state:{user:null,notes:null},getters:{getUser(e){return e.user},getNotes(e){return e.notes}},mutations:{saveUser(e,t){e.user=t},updateNotes(e,t){e.notes=t}},actions:{...zo,...Fo}});var Ao=Zo;function xo(e,t,o,n,s,r){const l=(0,a.up)("appsHeader"),i=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{title:"Jotes"}),(0,a.Wm)(i)],64)}const Mo={id:"header"},$o={class:"titleContainer"};function Vo(e,t,o,n,s,r){const l=(0,a.up)("router-link"),i=(0,a.up)("profileComponent");return(0,a.wg)(),(0,a.iD)("div",Mo,[(0,a._)("div",$o,[(0,a.Wm)(l,{class:"title",to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,C.zw)(o.title),1)])),_:1})]),(0,a.Wm)(i)])}const Jo={class:"profileWrap",ref:"test"},Yo={class:"profileContainer"},Go={key:0},Ko={class:"profileDetail"},Qo=(0,a.Uk)("my notes"),Xo={key:1};function en(e,t,o,s,r,l){const i=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Jo,[(0,a._)("i",{class:"bi bi-person-circle",onClick:t[0]||(t[0]=(0,n.iM)(((...e)=>s.clickHandler&&s.clickHandler(...e)),["stop"]))}),(0,a.wy)((0,a._)("div",Yo,[s.store.state.user?((0,a.wg)(),(0,a.iD)("div",Go,[(0,a._)("div",{class:"profileDetail",onClick:t[1]||(t[1]=(...e)=>s.profile&&s.profile(...e))},(0,C.zw)(s.store.state.user.name),1),(0,a._)("div",Ko,[(0,a.Wm)(i,{class:"link",to:"/notes"},{default:(0,a.w5)((()=>[Qo])),_:1})]),(0,a._)("div",{class:"profileDetail",onClick:t[2]||(t[2]=(...e)=>s.logout&&s.logout(...e))},"logout")])):((0,a.wg)(),(0,a.iD)("div",Xo,[(0,a._)("div",{class:"profileDetail",onClick:t[3]||(t[3]=(...e)=>s.login&&s.login(...e))},"login")]))],512),[[n.F8,s.profileShow]])],512)}var tn={name:"profileComponent",setup(){let e=(0,k.iH)(!1),t=(0,k.iH)(null),o=(0,B.oR)();(0,a.bv)((()=>{document.addEventListener("mousedown",s)}));const n=()=>{e.value=!e.value},s=o=>{t.value.contains(o.target)||(e.value=!1)},r=()=>{qo.push({path:"/user"})},l=async()=>{await o.dispatch("userLogout")},i=()=>{qo.push({path:"/user/profile"})};return{profileShow:e,clickHandler:n,test:t,store:o,login:r,logout:l,profile:i}}};const on=(0,w.Z)(tn,[["render",en],["__scopeId","data-v-11ca2c6e"]]);var nn=on,an={name:"appsHeader",components:{profileComponent:nn},props:{title:String},setup(){let e=(0,B.oR)();e.dispatch("getUserData")}};const sn=(0,w.Z)(an,[["render",Vo],["__scopeId","data-v-4c9f449b"]]);var rn=sn,ln={name:"App",components:{appsHeader:rn}};const cn=(0,w.Z)(ln,[["render",xo]]);var un=cn;(0,n.ri)(un).use(qo).use(Ao).mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,s){if(!n){var r=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],s=e[u][2];for(var l=!0,i=0;i<n.length;i++)(!1&s||r>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(l=!1,s<r&&(r=s));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,a,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,s,r=n[0],l=n[1],i=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(i)var u=i(o)}for(t&&t(n);c<r.length;c++)s=r[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(2073)}));n=o.O(n)})();
//# sourceMappingURL=app.2fc8b9c0.js.map