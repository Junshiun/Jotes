(function(){"use strict";var e={3522:function(e,t,o){var n={};o.r(n),o.d(n,{Z:function(){return Ce}});var a=o(9242),r=o(3396);const s=e=>((0,r.dD)("data-v-decf29c6"),e=e(),(0,r.Cn)(),e),i={class:"pageWrap_hp"},l={class:"wallpaperWrap_hp"},c=s((()=>(0,r._)("img",{class:"wallpaper_hp",src:"https://images.pexels.com/photos/442574/pexels-photo-442574.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"},null,-1))),u={class:"mainInfo_hp"},p=s((()=>(0,r._)("span",{class:"title"},"Create Your Notes in Jotes",-1))),d=s((()=>(0,r._)("span",null,"Login or Sign Up",-1))),m=(0,r.Uk)("Here");function g(e,t,o,n,a,s){const g=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",l,[c,(0,r._)("div",u,[p,d,(0,r.Wm)(g,{to:{name:"userMain"},class:"linkButton"},{default:(0,r.w5)((()=>[m])),_:1})])])])}var w={name:"homePage"},h=o(89);const v=(0,h.Z)(w,[["render",g],["__scopeId","data-v-decf29c6"]]);var f=v;const y={key:0,class:"mainPage"},_={class:"notes"};function b(e,t,o,n,a,s){const i=(0,r.up)("category-bar"),l=(0,r.up)("noteContainer"),c=(0,r.up)("router-view");return n.store.getters.getNotes?((0,r.wg)(),(0,r.iD)("div",y,[(0,r.Wm)(i,{notes:n.store.getters.getNotes,onFilter:n.filteredNotes},null,8,["notes","onFilter"]),(0,r._)("div",_,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.showingNotes,(e=>((0,r.wg)(),(0,r.j4)(l,{key:e,note:e,onFilter:n.filteredNotes},null,8,["note","onFilter"])))),128))]),((0,r.wg)(),(0,r.j4)(c,{key:e.$route.fullPath,class:"partWrapper"}))])):(0,r.kq)("",!0)}var k=o(4870),C=o(7139);const N={class:"noteWrapper"},P={class:"topWrapper"},D={class:"date"},U={class:"title"},S={class:"content"};function H(e,t,o,n,a,s){return(0,r.wg)(),(0,r.iD)("div",N,[(0,r._)("div",P,[(0,r._)("span",D,(0,C.zw)(n.date),1)]),(0,r._)("div",{class:"bottomWrapper",onClick:t[1]||(t[1]=(...e)=>n.noteNavigate&&n.noteNavigate(...e))},[(0,r._)("h1",U,(0,C.zw)(o.note.title),1),""!==o.note.category&&null!==o.note.category?((0,r.wg)(),(0,r.iD)("span",{key:0,class:"category",onClick:t[0]||(t[0]=e=>n.filter(o.note.category))},(0,C.zw)(o.note.category),1)):(0,r.kq)("",!0),(0,r._)("p",S,(0,C.zw)(o.note.content),1)])])}const O={class:"optionMain",ref:"option"},W={class:"options"};function j(e,t,o,n,s,i){return(0,r.wg)(),(0,r.iD)("div",O,[(0,r._)("i",{class:"bi bi-three-dots",onClick:t[0]||(t[0]=(...e)=>n.clickHandler&&n.clickHandler(...e))}),(0,r.wy)((0,r._)("div",W,[(0,r._)("span",{onClick:t[1]||(t[1]=(...e)=>n.editNote&&n.editNote(...e))},"edit"),(0,r._)("span",{onClick:t[2]||(t[2]=(...e)=>n.deleteNote&&n.deleteNote(...e))},"delete")],512),[[a.F8,n.showOptions]])],512)}var T=o(65),E={name:"noteOptions",props:["noteId"],setup(e){let t=(0,k.iH)(!1),o=(0,k.iH)(null);const n=(0,T.oR)();(0,r.bv)((()=>{document.addEventListener("mousedown",s)})),(0,r.Ah)((()=>{document.removeEventListener("mousedown",s)}));const a=()=>{t.value=!t.value},s=e=>{o.value.contains(e.target)||(t.value=!1)},i=()=>{Oo.push({path:`/notes/${e.noteId}/edit`})},l=async()=>{n.dispatch({type:"deleteNote",payload:{id:e.noteId}})};return{showOptions:t,clickHandler:a,option:o,deleteNote:l,editNote:i}}};const q=(0,h.Z)(E,[["render",j],["__scopeId","data-v-1e482718"]]);var I=q,z={name:"noteContainer",props:["note"],components:{noteOptions:I},setup(e,t){const o=e=>{t.emit("filter",e)},n=new Date(e.note.updatedAt).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"}),a=()=>{Oo.push({path:`/notes/${e.note._id}`})};return{filter:o,date:n,noteNavigate:a}}};const B=(0,h.Z)(z,[["render",H],["__scopeId","data-v-609c0140"]]);var Z=B;const L=e=>((0,r.dD)("data-v-685ec4fe"),e=e(),(0,r.Cn)(),e),F={class:"categoryBar"},R={class:"createWrap"},x=L((()=>(0,r._)("i",{class:"bi bi-plus-circle-dotted"},null,-1))),A=(0,r.Uk)(" note"),M={key:0,class:"categoriesWrap"},$=["onClick"];function V(e,t,o,n,a,s){const i=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",F,[(0,r._)("div",R,[(0,r.Wm)(i,{class:"create",to:"/notes/create"},{default:(0,r.w5)((()=>[x,A])),_:1})]),n.categories?((0,r.wg)(),(0,r.iD)("div",M,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.categories,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"categoryContainer",key:e,onClick:t=>n.onClick(t,e),ref_for:!0,ref:"categoryRef"},(0,C.zw)(e),9,$)))),128))])):(0,r.kq)("",!0)])}var J={name:"categoryBar",props:["notes"],setup(e,t){let o=(0,k.iH)(null),n=(0,k.iH)(null),a=(0,k.iH)(null);o=(0,r.Fl)((()=>{let t=["All"];return e.notes.map((e=>{t.includes(e.category)||""===e.category||null===e.category||t.push(e.category)})),t}));const s=(e,o)=>{for(let t=0;t<a.value.length;t++)a.value[t].classList.remove("selected");e.target.classList.toggle("selected"),n.value=o,t.emit("filter",o)};return(0,r.bv)((()=>{a.value[0].classList.add("selected")})),{categoryRef:a,categories:o,onClick:s,selected:n}}};const Y=(0,h.Z)(J,[["render",V],["__scopeId","data-v-685ec4fe"]]);var G=Y,K={name:"notesPage",components:{noteContainer:Z,categoryBar:G},setup(){let e,t=(0,k.iH)(null),o=(0,k.iH)(null);const n=(0,T.oR)();(async()=>{await n.dispatch("getUserData"),n.state.user||Oo.push({path:"/user"})})(),n.dispatch("fetchNotes"),t=(0,r.Fl)((()=>""===o.value||null===o.value||"All"===o.value?(e=n.state.notes,[...e].reverse()):(e=n.state.notes.filter((e=>e.category===o.value)),[...e].reverse())));let a=e=>{o.value=e};return{showingNotes:t,filteredNotes:a,store:n}}};const Q=(0,h.Z)(K,[["render",b],["__scopeId","data-v-4ecc5548"]]);var X=Q;function ee(e,t,o,n,a,s){const i=(0,r.up)("actionContainer"),l=(0,r.up)("loadingPage");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i,{page:"Create",type:2,btnOne:"discard",onButtonConfirm:n.createNote,onButtonOne:n.discard},null,8,["onButtonConfirm","onButtonOne"]),(0,r.Wm)(l,{show:n.loadShow},null,8,["show"])],64)}const te=e=>((0,r.dD)("data-v-3fd25344"),e=e(),(0,r.Cn)(),e),oe={key:0,class:"partWrapper_np"},ne={class:"noteOptions_np"},ae={key:0,class:"bi bi-trash-fill"},re={key:1,class:"bi bi-x-circle"},se={class:"noteWrapper_np"},ie={class:"category_np"},le=(0,r.Uk)(" category: "),ce={class:"content_np"},ue=te((()=>(0,r._)("button",{type:"submit"},"confirm",-1)));function pe(e,t,o,n,s,i){return n.theNote||2===o.type?((0,r.wg)(),(0,r.iD)("div",oe,[(0,r._)("div",ne,[(0,r._)("h1",null,(0,C.zw)(o.page),1),(0,r._)("button",{class:"deleteButton",onClick:t[0]||(t[0]=(...e)=>n.buttonOne&&n.buttonOne(...e))},[1===o.type?((0,r.wg)(),(0,r.iD)("i",ae)):((0,r.wg)(),(0,r.iD)("i",re)),(0,r.Uk)((0,C.zw)(o.btnOne),1)])]),(0,r._)("div",se,[n.theNote||2===o.type?((0,r.wg)(),(0,r.iD)("form",{key:0,class:"noteContainer_np",onSubmit:t[4]||(t[4]=(0,a.iM)(((...e)=>n.buttonConfirm&&n.buttonConfirm(...e)),["prevent"]))},[(0,r._)("h1",null,[(0,r.wy)((0,r._)("input",{class:"inputTitle_np","onUpdate:modelValue":t[1]||(t[1]=e=>n.title=e),type:"text",required:""},null,512),[[a.nr,n.title]])]),(0,r._)("div",ie,[le,(0,r.wy)((0,r._)("input",{class:"inputCategory_np","onUpdate:modelValue":t[2]||(t[2]=e=>n.category=e),type:"text"},null,512),[[a.nr,n.category]])]),(0,r._)("div",ce,[(0,r.wy)((0,r._)("textarea",{class:"inputContent_np","onUpdate:modelValue":t[3]||(t[3]=e=>n.content=e)},null,512),[[a.nr,n.content]])]),ue],32)):(0,r.kq)("",!0)])])):(0,r.kq)("",!0)}var de={name:"actionContainer",props:["note","btnOne","type","page"],setup(e,t){const o=(0,k.iH)(e.note);let n=(0,k.iH)(null),a=(0,k.iH)(null),r=(0,k.iH)(null);e.note&&(n.value=o.value.title,a.value=o.value.category,r.value=o.value.content);const s=async()=>{t.emit("buttonConfirm",{title:n.value,category:a.value,content:r.value})},i=async()=>{t.emit("buttonOne")};return{theNote:o,title:n,category:a,content:r,buttonConfirm:s,buttonOne:i}}};const me=(0,h.Z)(de,[["render",pe],["__scopeId","data-v-3fd25344"]]);var ge=me,we=o(678);const he=e=>((0,r.dD)("data-v-2797ffdf"),e=e(),(0,r.Cn)(),e),ve={key:0,class:"loadingPage"},fe=he((()=>(0,r._)("div",{class:"loadingWrap"},[(0,r._)("div",null,"Loading"),(0,r._)("div",{class:"loadingBar"})],-1))),ye=[fe];function _e(e,t,o,n,a,s){return o.show?((0,r.wg)(),(0,r.iD)("div",ve,ye)):(0,r.kq)("",!0)}var be={props:["show"],setup(){}};const ke=(0,h.Z)(be,[["render",_e],["__scopeId","data-v-2797ffdf"]]);var Ce=ke,Ne={name:"createPage",components:{actionContainer:ge,loadingPage:Ce},setup(){let e=!1,t=(0,k.iH)(!1);const o=(0,T.oR)(),n=async({title:n,category:a,content:r})=>{e=!0,t.value=!0,await o.dispatch({type:"createNote",payload:{title:n,category:a,content:r}}),t.value=!1},a=()=>{Oo.push({path:"/notes"})};return(0,we.iS)(((t,o,n)=>{if(!0!==e){const e=confirm("all changes will not be saved. Are you sure?");e?n():n(!1)}else n()})),{createNote:n,discard:a,loadShow:t}}};const Pe=(0,h.Z)(Ne,[["render",ee],["__scopeId","data-v-8e001138"]]);var De=Pe;function Ue(e,t,o,n,a,s){const i=(0,r.up)("router-view");return n.note?((0,r.wg)(),(0,r.j4)(i,{key:0,note:n.note},null,8,["note"])):(0,r.kq)("",!0)}var Se={name:"notePage",setup(){const e=(0,we.yj)(),t=(0,T.oR)();let o=e.params.id;const n=(0,k.iH)(null);return(async()=>{const e={method:"GET",headers:{Authorization:`Bearer ${t.state.user.token}`}},a=await fetch(`https://jotes-back-end.herokuapp.com/notes/${o}`,e);a.ok?n.value=await a.json():Oo.push({path:"/notes"})})(),{note:n}}};const He=(0,h.Z)(Se,[["render",Ue]]);var Oe=He;const We={key:0,class:"partWrapper_np"},je={class:"noteOptions_np"},Te=(0,r._)("h1",null,null,-1),Ee=(0,r._)("i",{class:"bi bi-pencil-square"},null,-1),qe=(0,r.Uk)("edit"),Ie=(0,r._)("i",{class:"bi bi-trash-fill"},null,-1),ze=(0,r.Uk)("delete "),Be=[Ie,ze],Ze={class:"noteWrapper_np"},Le={class:"noteContainer_np"},Fe={key:0,class:"category_np"},Re={class:"content_np"};function xe(e,t,o,n,a,s){const i=(0,r.up)("router-link"),l=(0,r.up)("loadingPage");return(0,r.wg)(),(0,r.iD)(r.HY,null,[n.theNote?((0,r.wg)(),(0,r.iD)("div",We,[(0,r._)("div",je,[Te,(0,r.Wm)(i,{class:"editButton_np",to:{path:"/notes/"+o.note._id+"/edit"}},{default:(0,r.w5)((()=>[Ee,qe])),_:1},8,["to"]),(0,r._)("button",{class:"deleteButton",onClick:t[0]||(t[0]=(...e)=>n.deleteNote&&n.deleteNote(...e))},Be)]),(0,r._)("div",Ze,[(0,r._)("div",Le,[(0,r._)("h1",null,(0,C.zw)(n.theNote.title),1),""!==n.theNote.category&&null!==n.theNote.category?((0,r.wg)(),(0,r.iD)("div",Fe," category: "+(0,C.zw)(n.theNote.category),1)):(0,r.kq)("",!0),(0,r._)("div",Re,(0,C.zw)(n.theNote.content),1)])])])):(0,r.kq)("",!0),(0,r.Wm)(l,{show:n.loadShow},null,8,["show"])],64)}var Ae={name:"notePageContainer",props:["note"],components:{loadingPage:Ce},setup(e){const t=(0,k.iH)(e.note);let o=(0,k.iH)(!1);const n=(0,T.oR)(),a=async()=>{o.value=!0;let e=await n.dispatch({type:"deleteNote",payload:{id:t.value._id}});!0===e&&Oo.push({path:"/notes"}),o.value=!1};return{theNote:t,deleteNote:a,loadShow:o}}};const Me=(0,h.Z)(Ae,[["render",xe]]);var $e=Me;function Ve(e,t,o,n,a,s){const i=(0,r.up)("actionContainer"),l=(0,r.up)("loadingPage");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i,{page:"Edit",type:1,btnOne:"delete",note:n.theNote,onButtonOne:n.deleteNote,onButtonConfirm:n.editHandler},null,8,["note","onButtonOne","onButtonConfirm"]),(0,r.Wm)(l,{show:n.loadShow},null,8,["show"])],64)}var Je={name:"editPage",props:["note"],components:{actionContainer:ge,loadingPage:Ce},setup(e){const t=(0,k.iH)(e.note),o=(0,T.oR)();let n=(0,k.iH)(!1),a=!1;const r=async({title:e,category:r,content:s})=>{n.value=!0;const i=await o.dispatch({type:"editNote",payload:{title:e,category:r,content:s,id:t.value._id}});!0!==i?console.log(i):(a=!0,o.dispatch({type:"fetchNotes"}),Oo.push({path:`/notes/${t.value._id}`})),n.value=!1},s=async()=>{n.value=!0;let e=await o.dispatch({type:"deleteNote",payload:{id:t.value._id}});!0!==e?console.log(e):!0===e&&(a=!0,o.dispatch({type:"fetchNotes"}),Oo.push({path:"/notes"})),n.value=!1};return(0,we.iS)(((e,t,o)=>{if(!0!==a){const e=confirm("all changes will not be saved. Are you sure?");e?o():o(!1)}else o()})),{theNote:t,editHandler:r,deleteNote:s,loadShow:n}}};const Ye=(0,h.Z)(Je,[["render",Ve],["__scopeId","data-v-e2ae9eb6"]]);var Ge=Ye;const Ke={class:"userMainWrap",ref:"forScroll"},Qe={class:"userMain"},Xe={key:0,class:"errorContain"},et=(0,r._)("i",{class:"bi bi-exclamation"},null,-1),tt={key:1,class:"infoContain"},ot=(0,r._)("i",{class:"bi bi-info-circle-fill"},null,-1),nt={class:"userMainContain"};function at(e,t,o,n,a,s){const i=(0,r.up)("userLogin"),l=(0,r.up)("userRegister");return(0,r.wg)(),(0,r.iD)("div",Ke,[(0,r._)("div",Qe,[n.error?((0,r.wg)(),(0,r.iD)("div",Xe,[et,(0,r.Uk)(" "+(0,C.zw)(n.error),1)])):n.info?((0,r.wg)(),(0,r.iD)("div",tt,[ot,(0,r.Uk)(" "+(0,C.zw)(n.info),1)])):(0,r.kq)("",!0),(0,r._)("div",nt,[(0,r.Wm)(i,{onErrorUpdate:n.errorUpdate},null,8,["onErrorUpdate"]),(0,r.Wm)(l,{onErrorUpdate:n.errorUpdate,onInfoUpdate:n.infoUpdate},null,8,["onErrorUpdate","onInfoUpdate"])])])],512)}const rt={class:"inputField_up"},st={class:"controlContainer_up"},it=(0,r._)("label",{for:"loginEmail"},"Email:",-1),lt={class:"controlContainer_up"},ct=(0,r._)("label",{for:"loginPassword"},"Password:",-1);function ut(e,t,o,n,s,i){const l=(0,r.up)("userContainer"),c=(0,r.up)("loadingPage");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{title:"Login",buttonName:"login",onFormSubmit:n.loginUser},{default:(0,r.w5)((()=>[(0,r._)("div",rt,[(0,r._)("div",st,[it,(0,r.wy)((0,r._)("input",{id:"loginEmail",type:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[a.nr,n.email]])]),(0,r._)("div",lt,[ct,(0,r.wy)((0,r._)("input",{id:"loginPassword",type:"password",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e)},null,512),[[a.nr,n.password]])])])])),_:1},8,["onFormSubmit"]),(0,r.Wm)(c,{show:n.loadShow},null,8,["show"])],64)}const pt={class:"userContainer_up"},dt={key:0,class:"imgContainer_up"},mt=(0,r._)("img",{class:"img_up",src:"https://images.pexels.com/photos/952670/pexels-photo-952670.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"},null,-1),gt=(0,r._)("span",null,"Welcome",-1),wt=[mt,gt],ht={class:"title_up"},vt={class:"userMainButton_up",type:"submit"};function ft(e,t,o,n,a,s){return(0,r.wg)(),(0,r.iD)("div",pt,["Login"===o.title?((0,r.wg)(),(0,r.iD)("div",dt,wt)):(0,r.kq)("",!0),(0,r._)("div",ht,(0,C.zw)(o.title),1),(0,r._)("form",{class:"userForm_up",onSubmit:t[0]||(t[0]=(...e)=>n.formSubmit&&n.formSubmit(...e))},[(0,r.WI)(e.$slots,"default"),(0,r._)("button",vt,(0,C.zw)(o.buttonName),1)],32)])}var yt={props:["title","buttonName"],setup(e,t){const o=e=>{e.preventDefault(),t.emit("formSubmit")};return{formSubmit:o}}};const _t=(0,h.Z)(yt,[["render",ft]]);var bt=_t,kt={name:"userLogin",components:{userContainer:bt,loadingPage:Ce},setup(e,t){let o=(0,k.iH)(null),n=(0,k.iH)(null),a=(0,k.iH)(!1);const r=(0,T.oR)(),s=(0,we.tv)();r.dispatch("getUserData"),r.getters.getUser&&s.push({path:"/notes"});const i=async()=>{a.value=!0;let e=await r.dispatch({type:"userLogin",payload:{email:o.value,password:n.value}});!0===e?console.log("login success"):t.emit("errorUpdate",e),a.value=!1};return{email:o,password:n,loginUser:i,loadShow:a}}};const Ct=(0,h.Z)(kt,[["render",ut]]);var Nt=Ct;const Pt={class:"inputField_up"},Dt={class:"controlContainer_up"},Ut=(0,r._)("label",{for:"registerName"},"Name:",-1),St={class:"controlContainer_up"},Ht=(0,r._)("label",{for:"registerEmail"},"Email:",-1),Ot={class:"controlContainer_up"},Wt=(0,r._)("label",{for:"registerPassword"},"Password:",-1),jt={class:"controlContainer_up"},Tt=(0,r._)("label",{for:"registerConfirm"},"Confirm Password:",-1);function Et(e,t,o,n,s,i){const l=(0,r.up)("userContainer"),c=(0,r.up)("loadingPage");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{title:"Sign Up",buttonName:"register",onFormSubmit:n.registerUser},{default:(0,r.w5)((()=>[(0,r._)("div",Pt,[(0,r._)("div",Dt,[Ut,(0,r.wy)((0,r._)("input",{id:"registerName",type:"text",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e)},null,512),[[a.nr,n.name]])]),(0,r._)("div",St,[Ht,(0,r.wy)((0,r._)("input",{id:"registerEmail",type:"email",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e)},null,512),[[a.nr,n.email]])]),(0,r._)("div",Ot,[Wt,(0,r.wy)((0,r._)("input",{id:"registerPassword",type:"password",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e)},null,512),[[a.nr,n.password]])]),(0,r._)("div",jt,[Tt,(0,r.wy)((0,r._)("input",{id:"registerConfirm",type:"password",required:"","onUpdate:modelValue":t[3]||(t[3]=e=>n.confirmPwd=e)},null,512),[[a.nr,n.confirmPwd]])])])])),_:1},8,["onFormSubmit"]),(0,r.Wm)(c,{show:n.loadShow},null,8,["show"])],64)}var qt={name:"userRegister",components:{userContainer:bt,loadingPage:Ce},setup(e,t){let o=(0,k.iH)(null),n=(0,k.iH)(null),a=(0,k.iH)(null),r=(0,k.iH)(null),s=(0,k.iH)(!1);const i=(0,T.oR)(),l=async()=>{if(a.value.length<8)return void t.emit("errorUpdate","password length cannot less than 8 letters");if(a.value!==r.value)return void t.emit("errorUpdate","password and comfirm password is not the same");s.value=!0;let e=await i.dispatch({type:"userRegister",payload:{name:o.value,email:n.value,password:a.value}});!1===e?t.emit("errorUpdate","an account with the same email already exists, please try again"):!0===e?(t.emit("infoUpdate","account created successfully, please try to login"),o.value="",n.value="",a.value="",r.value=""):t.emit("errorUpdate",e),s.value=!1};return{name:o,email:n,password:a,confirmPwd:r,registerUser:l,loadShow:s}}};const It=(0,h.Z)(qt,[["render",Et]]);var zt=It,Bt={components:{userLogin:Nt,userRegister:zt},setup(){const e=(0,k.iH)(null);let t=(0,k.iH)(null),o=(0,k.iH)(null);const n=e=>{t.value=e,setTimeout((()=>{r()}),500)},a=e=>{o.value=e,setTimeout((()=>{r()}),500)},r=()=>{e.value.scrollTo({top:0,behavior:"smooth"})};return{error:t,info:o,errorUpdate:n,infoUpdate:a,forScroll:e}}};const Zt=(0,h.Z)(Bt,[["render",at]]);var Lt=Zt;const Ft={class:"userProfile",ref:"forScroll"};function Rt(e,t,o,n,a,s){const i=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",Ft,[(0,r.Wm)(i,{user:n.user,notes:n.notes,onScrollTop:n.scroll},null,8,["user","notes","onScrollTop"])],512)}const xt=(0,r._)("i",{class:"bi bi-pencil-square"},null,-1),At=(0,r._)("div",{class:"relativeImgContainer"},[(0,r._)("div",{class:"imgContainer"},[(0,r._)("img",{class:"profileImage",src:"/avatar1.png"}),(0,r._)("i",{class:"bi bi-image-alt"},[(0,r._)("a",{href:"https://www.freepik.com/vectors/teenager",target:"_blank"},"Teenager vector created by studiogstock - www.freepik.com")])])],-1),Mt={class:"nameSpan"},$t={key:0};function Vt(e,t,o,n,a,s){const i=(0,r.up)("router-link"),l=(0,r.up)("profileTemplate");return o.user?((0,r.wg)(),(0,r.j4)(l,{key:0,type:"main"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{to:{name:"profileEdit"},class:"editButton"},{default:(0,r.w5)((()=>[xt])),_:1}),At,(0,r._)("span",Mt,(0,C.zw)(o.user.name),1),(0,r._)("span",null,"Email: "+(0,C.zw)(o.user.email),1),o.notes?((0,r.wg)(),(0,r.iD)("span",$t," Total notes: "+(0,C.zw)(o.notes.length),1)):(0,r.kq)("",!0)])),_:1})):(0,r.kq)("",!0)}const Jt=e=>((0,r.dD)("data-v-a4eb245e"),e=e(),(0,r.Cn)(),e),Yt={class:"profileContainer_pp"},Gt={key:0,class:"errorContain"},Kt=Jt((()=>(0,r._)("i",{class:"bi bi-exclamation"},null,-1))),Qt=Jt((()=>(0,r._)("span",{class:"hiSpan"},"hi",-1)));function Xt(e,t,o,n,a,s){return(0,r.wg)(),(0,r.iD)("div",Yt,["edit"===o.type&&o.error?((0,r.wg)(),(0,r.iD)("div",Gt,[Kt,(0,r.Uk)(" "+(0,C.zw)(o.error),1)])):(0,r.kq)("",!0),Qt,(0,r.WI)(e.$slots,"default",{},void 0,!0)])}var eo={props:["type","error"],setup(){}};const to=(0,h.Z)(eo,[["render",Xt],["__scopeId","data-v-a4eb245e"]]);var oo=to,no={components:{profileTemplate:oo},props:["user","notes"],setup(){}};const ao=(0,h.Z)(no,[["render",Vt]]);var ro=ao,so={name:"userProfile",components:{profileMain:ro},setup(){const e=(0,T.oR)();let t=(0,k.iH)(null);if(e.dispatch("getUserData"),e.dispatch({type:"fetchNotes"}),!e.state.user)return void Oo.push({path:"/user"});const o=(0,r.Fl)((()=>e.state.user)),n=(0,r.Fl)((()=>e.state.notes)),a=()=>{setTimeout((()=>{t.value.scrollTo({top:0,behavior:"smooth"})}),500)};return{store:e,user:o,notes:n,forScroll:t,scroll:a}}};const io=(0,h.Z)(so,[["render",Rt],["__scopeId","data-v-4ee62a0b"]]);var lo=io;const co=e=>((0,r.dD)("data-v-3d8888ce"),e=e(),(0,r.Cn)(),e),uo=co((()=>(0,r._)("div",{class:"relativeImgContainer"},[(0,r._)("div",{class:"imgContainer"},[(0,r._)("img",{class:"profileImage",src:"/avatar1.png"}),(0,r._)("i",{class:"bi bi-image-alt"},[(0,r._)("a",{href:"https://www.freepik.com/vectors/teenager",target:"_blank"},"Teenager vector created by studiogstock - www.freepik.com")])])],-1))),po=co((()=>(0,r._)("label",{for:"password_pp"},"Password: ",-1))),mo=co((()=>(0,r._)("i",{class:"bi bi-shield-lock-fill"},null,-1))),go=(0,r.Uk)(" Change Password "),wo=[mo,go],ho={key:0},vo={class:"controlPwd"},fo=co((()=>(0,r._)("label",{class:"labelNewPwd",for:"newPassword"},"New Password: ",-1))),yo={class:"controlPwd"},_o=co((()=>(0,r._)("label",{class:"labelNewPwd",for:"confirmNewPassword"},"Confirm New Password: ",-1))),bo={class:"buttonWrap"},ko=co((()=>(0,r._)("i",{class:"bi bi-trash-fill"},null,-1))),Co=(0,r.Uk)("Delete Account "),No=[ko,Co],Po=co((()=>(0,r._)("button",{class:"doneButton",type:"submit"},[(0,r._)("i",{class:"bi bi-pencil-square"}),(0,r.Uk)(" Done Edit ")],-1)));function Do(e,t,o,n,s,i){const l=(0,r.up)("profileTemplate"),c=(0,r.up)("loadingPage");return(0,r.wg)(),(0,r.iD)(r.HY,null,[o.user?((0,r.wg)(),(0,r.j4)(l,{key:0,type:"edit",error:n.error},{default:(0,r.w5)((()=>[(0,r._)("form",{onSubmit:t[6]||(t[6]=(0,a.iM)(((...e)=>n.editUser&&n.editUser(...e)),["prevent"]))},[uo,(0,r.wy)((0,r._)("input",{class:"nameSpan","onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),required:""},null,512),[[a.nr,n.name]]),(0,r._)("span",null,"Email: "+(0,C.zw)(o.user.email),1),(0,r._)("div",null,[po,(0,r.wy)((0,r._)("input",{type:"password",id:"password_pp","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),required:""},null,512),[[a.nr,n.password]])]),(0,r._)("span",{class:"changeButton",onClick:t[2]||(t[2]=(...e)=>n.updateChangePwd&&n.updateChangePwd(...e))},wo),n.changePwd?((0,r.wg)(),(0,r.iD)("div",ho,[(0,r._)("div",vo,[fo,(0,r.wy)((0,r._)("input",{type:"password",id:"newPassword","onUpdate:modelValue":t[3]||(t[3]=e=>n.newPassword=e),required:"",class:"inputControl"},null,512),[[a.nr,n.newPassword]])]),(0,r._)("div",yo,[_o,(0,r.wy)((0,r._)("input",{type:"password",id:"confirmNewPassword","onUpdate:modelValue":t[4]||(t[4]=e=>n.confirmNewPassword=e),required:"",class:"inputControl"},null,512),[[a.nr,n.confirmNewPassword]])])])):(0,r.kq)("",!0),(0,r._)("div",bo,[(0,r._)("button",{class:"deleteButton",onClick:t[5]||(t[5]=(...e)=>n.deleteUser&&n.deleteUser(...e))},No),Po])],32)])),_:1},8,["error"])):(0,r.kq)("",!0),(0,r.Wm)(c,{show:n.loadShow},null,8,["show"])],64)}var Uo={name:"profileEdit",props:["user","notes"],components:{profileTemplate:oo,loadingPage:Ce},setup(e,t){let o=(0,k.iH)(e.user.name),n=(0,k.iH)(null),a=(0,k.iH)(null),r=(0,k.iH)(null),s=(0,k.iH)(null),i=!1,l=(0,k.iH)(!1),c=(0,k.iH)(!1);const u=(0,T.oR)(),p=()=>{l.value=!l.value},d=async()=>{c.value=!0;let e=await u.dispatch({type:"userEdit",payload:{password:n.value,name:o.value,changePwd:l.value,newPassword:a.value}});!0!==e?g(e):(i=!0,Oo.push({path:"/user/profile"})),c.value=!1},m=async()=>{c.value=!0;let e=await u.dispatch({type:"userDelete",payload:{password:n.value}});!0!==e?g(e):(i=!0,Oo.push({path:"/"})),c.value=!1},g=e=>{s.value=e,t.emit("scrollTop")};return(0,we.iS)(((e,t,o)=>{if(!0!==i){const e=confirm("all changes will not be saved. Are you sure?");e?o():o(!1)}else o()})),{name:o,password:n,newPassword:a,confirmNewPassword:r,updateChangePwd:p,changePwd:l,editUser:d,deleteUser:m,error:s,loadShow:c}}};const So=(0,h.Z)(Uo,[["render",Do],["__scopeId","data-v-3d8888ce"]]);var Ho=So;const Oo=(0,we.p7)({history:(0,we.PO)("/Jotes_FE/"),routes:[{path:"/",name:"homePage",component:f},{path:"/user",name:"userMain",component:Lt},{path:"/user/profile",name:"userProfile",component:lo,children:[{path:"",name:"profileMain",component:ro},{path:"edit",name:"profileEdit",component:Ho}]},{path:"/notes",name:"notesPage",component:X,children:[{path:"create",component:De},{path:":id",name:"notePage",component:Oe,children:[{path:"",component:$e},{path:":edit",component:Ge}]}]},{path:"/:others",redirect:"/",component:f}]}),Wo={getUserData(e){let t=JSON.parse(sessionStorage.getItem("userData"));e.commit("saveUser",t)},async userRegister({dispatch:e},{payload:t}){let o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,password:t.password})};try{let e=await fetch("https://jotes-back-end.herokuapp.com/users",o);return!!e.ok}catch(n){return n}},async userLogin({dispatch:e},{payload:{email:t,password:o}}){let n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:o})};try{console.log("https://jotes-back-end.herokuapp.com");let t=await fetch("https://jotes-back-end.herokuapp.com/users/login",n),o=await t.json();return t.ok?(sessionStorage.setItem("userData",JSON.stringify(o)),e("getUserData"),Oo.push({path:"/notes"}),!0):"invalid email or password"}catch(a){return a.message}},async userLogout({dispatch:e}){sessionStorage.removeItem("userData"),e("getUserData"),Oo.push({path:"/"})},async userEdit({dispatch:e,state:t},{payload:o}){const n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:o.password,name:o.name,changePwd:o.changePwd,email:t.user.email,newPassword:o.newPassword})};try{let t=await fetch("https://jotes-back-end.herokuapp.com/users/profile",n),o=await t.json();return t.ok?(sessionStorage.setItem("userData",JSON.stringify(o)),e({type:"getUserData"}),!0):o.message}catch(a){return a}},async userDelete({dispatch:e,state:t},{payload:o}){let n=confirm("Are you sure you want to delete this account?");const a={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.user.email,password:o.password})};if(n)try{let t=await fetch("https://jotes-back-end.herokuapp.com/users/profile",a),o=await t.json();return t.ok?(sessionStorage.removeItem("userData"),e({type:"getUserData"}),!0):o.message}catch(r){return r}}};var jo=Wo;const To={async fetchNotes({commit:e,state:t}){const o={method:"GET",headers:{Authorization:`Bearer ${t.user.token}`}},n=await fetch("https://jotes-back-end.herokuapp.com/notes",o).then((e=>e.json()));e("updateNotes",n)},async editNote({state:e},{payload:{title:t,category:o,content:n,id:a}}){const r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.user.token}`},body:JSON.stringify({title:t,category:o,content:n})};try{const e=await fetch(`https://jotes-back-end.herokuapp.com/notes/${a}`,r);return!!e.ok||"note not found"}catch(s){return"error when request for note editing"}},async createNote({state:e,dispatch:t},{payload:{title:o,category:n,content:a}}){const r={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.user.token}`},body:JSON.stringify({title:o,category:n,content:a})};try{const e=await fetch("https://jotes-back-end.herokuapp.com/notes/create",r);return e.ok?(t("fetchNotes"),Oo.push({path:"/notes"}),!0):"error when creating new note"}catch(s){return s}},async deleteNote({dispatch:e,state:t},{payload:{id:o}}){let n=confirm("Are you sure?");if(!n)return!1;{const n={method:"DELETE",headers:{Authorization:`Bearer ${t.user.token}`}};try{const t=await fetch(`https://jotes-back-end.herokuapp.com/notes/${o}`,n);return t.ok?(e("fetchNotes"),!0):"error when delete note"}catch(a){return a}}}};var Eo=To;const qo=(0,T.MT)({state:{user:null,notes:null},getters:{getUser(e){return e.user},getNotes(e){return e.notes}},mutations:{saveUser(e,t){e.user=t},updateNotes(e,t){e.notes=t}},actions:{...jo,...Eo}});var Io=qo;function zo(e,t,o,n,a,s){const i=(0,r.up)("appsHeader"),l=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(i,{title:"Jotes"}),(0,r.Wm)(l)],64)}const Bo={id:"header"},Zo={class:"titleContainer"};function Lo(e,t,o,n,a,s){const i=(0,r.up)("router-link"),l=(0,r.up)("profileComponent");return(0,r.wg)(),(0,r.iD)("div",Bo,[(0,r._)("div",Zo,[(0,r.Wm)(i,{class:"title",to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,C.zw)(o.title),1)])),_:1})]),(0,r.Wm)(l)])}const Fo={class:"profileWrap",ref:"test"},Ro={class:"profileContainer"},xo={key:0},Ao={class:"profileDetail"},Mo=(0,r.Uk)("my notes"),$o={key:1};function Vo(e,t,o,n,s,i){const l=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",Fo,[(0,r._)("i",{class:"bi bi-person-circle",onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>n.clickHandler&&n.clickHandler(...e)),["stop"]))}),(0,r.wy)((0,r._)("div",Ro,[n.store.state.user?((0,r.wg)(),(0,r.iD)("div",xo,[(0,r._)("div",{class:"profileDetail",onClick:t[1]||(t[1]=(...e)=>n.profile&&n.profile(...e))},(0,C.zw)(n.store.state.user.name),1),(0,r._)("div",Ao,[(0,r.Wm)(l,{class:"link",to:"/notes"},{default:(0,r.w5)((()=>[Mo])),_:1})]),(0,r._)("div",{class:"profileDetail",onClick:t[2]||(t[2]=(...e)=>n.logout&&n.logout(...e))},"logout")])):((0,r.wg)(),(0,r.iD)("div",$o,[(0,r._)("div",{class:"profileDetail",onClick:t[3]||(t[3]=(...e)=>n.login&&n.login(...e))},"login")]))],512),[[a.F8,n.profileShow]])],512)}var Jo={name:"profileComponent",components:{loadingPage:n.loadingPage},setup(){let e=(0,k.iH)(!1),t=(0,k.iH)(null),o=(0,T.oR)();(0,k.iH)(!1);(0,r.bv)((()=>{document.addEventListener("mousedown",a)}));const n=()=>{e.value=!e.value},a=o=>{t.value.contains(o.target)||(e.value=!1)},s=()=>{Oo.push({path:"/user"})},i=async()=>{o.dispatch("userLogout")},l=()=>{Oo.push({path:"/user/profile"})};return{profileShow:e,clickHandler:n,test:t,store:o,login:s,logout:i,profile:l}}};const Yo=(0,h.Z)(Jo,[["render",Vo],["__scopeId","data-v-d38ee17a"]]);var Go=Yo,Ko={name:"appsHeader",components:{profileComponent:Go},props:{title:String},setup(){let e=(0,T.oR)();e.dispatch("getUserData")}};const Qo=(0,h.Z)(Ko,[["render",Lo],["__scopeId","data-v-4c9f449b"]]);var Xo=Qo,en={name:"App",components:{appsHeader:Xo}};const tn=(0,h.Z)(en,[["render",zo]]);var on=tn;(0,a.ri)(on).use(Oo).use(Io).mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,r){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],r=e[u][2];for(var i=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,r,s=n[0],i=n[1],l=n[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(l)var u=l(o)}for(t&&t(n);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(3522)}));n=o.O(n)})();
//# sourceMappingURL=app.e2cba97a.js.map